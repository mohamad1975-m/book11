<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬ØºØ±Ø§ÙÛŒØ§</title>
<style>
  @font-face{font-family:'iranyekan';src:url('iranyekanweblight.woff') format('woff')}
  *{box-sizing:border-box}
  body{
    font-family:'iranyekan',sans-serif;margin:0;padding:0;color:#fff;
    background:radial-gradient(circle at 20% 20%,#e3f2fd,transparent 40%),
               radial-gradient(circle at 80% 25%,#d4fc79,transparent 42%),
               radial-gradient(circle at 20% 80%,#96e6a1,transparent 45%),
               radial-gradient(circle at 80% 75%,#8fd3f4,transparent 40%),
               linear-gradient(180deg,#58a 0%,#2c3e50 100%);
    background-attachment:fixed;min-height:100vh;position:relative
  }
  body::before{content:"";position:fixed;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.15),rgba(0,0,0,.25));pointer-events:none;z-index:0}

  header{
    text-align:center;font-weight:800;margin:26px 0 10px;font-size:38px;
    background:linear-gradient(90deg,#60a5fa,#a78bfa,#34d399,#fbbf24,#f87171);
    background-size:400% 400%;
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    animation:headGrad 18s ease infinite;text-shadow:0 0 10px rgba(255,255,255,.25);position:relative;z-index:1
  }
  @keyframes headGrad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  .panel{
    width:min(920px,95%);margin:20px auto;padding:22px 20px 26px;background:rgba(255,255,255,.12);
    border:1px solid rgba(255,255,255,.2);border-radius:18px;box-shadow:0 10px 25px rgba(0,0,0,.35);
    backdrop-filter:blur(6px);position:relative;z-index:1
  }
  .panel h2{margin:0 0 18px;font-size:22px;color:#f1f5f9;text-shadow:0 2px 8px rgba(0,0,0,.4)}
  ul.books{list-style:none;margin:0;padding:0}
  li{margin:10px 0}

  /* Ù†ÙˆØ§Ø± Ú©Ù†ØªØ±Ù„ */
  .top-controls{
    width:min(920px,95%);margin:8px auto 0;display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap
  }
  .top-controls .box{
    flex:1 1 240px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.2);
    border-radius:12px;padding:8px 10px;color:#fff;box-shadow:0 6px 16px rgba(0,0,0,.25);backdrop-filter:blur(6px)
  }
  .top-controls input,.top-controls select{
    width:100%;border:none;background:transparent;color:#fff;font-family:'iranyekan';
    outline:none;font-size:14px
  }
  /* Ø±Ù†Ú¯ Ù…Ù†ÙˆÛŒ Ø§Ù†ØªØ®Ø§Ø¨ */
  select option{background:rgba(25,35,48,.92);color:#fff}

  /* Ú©Ø§Ø±Øª Ú©ØªØ§Ø¨ */
  .book-card{
    display:flex;align-items:center;justify-content:space-between;gap:10px;text-decoration:none;color:#fff;
    background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.15);padding:16px 18px;border-radius:12px;
    box-shadow:0 6px 18px rgba(0,0,0,.28);transition:transform .18s ease,box-shadow .18s ease,background .18s ease;position:relative
  }
  .book-card:hover{transform:translateY(-3px);background:rgba(255,255,255,.16);box-shadow:0 12px 28px rgba(0,0,0,.45)}
  .book-card .title{font-size:16.5px;line-height:1.6;white-space:normal;word-wrap:break-word;flex:1;text-shadow:0 2px 6px rgba(0,0,0,.45)}
  .book-card .dlcount{font-size:12px;opacity:.95;margin-right:8px}

  /* Ø³ØªÙˆÙ† Ú†Ù¾: Ø¯Ø§Ù†Ù„ÙˆØ¯ + Ø§Ø´ØªØ±Ø§Ú© */
  .left-col{display:flex;flex-direction:column;align-items:center;gap:6px;min-width:48px;margin-left:12px}
  .badge{width:26px;height:26px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.45));transition:transform .15s ease}
  .badge:hover{transform:translateY(-2px)}
  .badge svg{width:100%;height:100%;fill:#fff}
  .size-lbl{font-size:11px;color:#eaeaea;text-shadow:0 2px 6px rgba(0,0,0,.45)}

  /* Ø³ØªÙˆÙ† Ø±Ø§Ø³Øª: Ø³ØªØ§Ø±Ù‡ + Ø®Ø±ÛŒØ¯ */
  .right-col{display:flex;flex-direction:column;align-items:center;gap:6px;min-width:48px;margin-right:12px}
  .meta{font-size:12px;color:#eaeaea;text-shadow:0 2px 6px rgba(0,0,0,.45)}

  .btn-back{display:inline-block;margin:24px auto 10px;background:linear-gradient(135deg,#1C93E3,#2ea3f2);padding:12px 26px;color:#fff;text-decoration:none;border-radius:12px;box-shadow:0 8px 18px rgba(28,147,227,.4);transition:transform .15s ease, box-shadow .15s ease}
  .btn-back:hover{transform:translateY(-2px);box-shadow:0 12px 26px rgba(28,147,227,.6)}

  #counter{text-align:center;margin:20px 0 30px;font-size:15px;color:#eaeaea;text-shadow:0 2px 6px rgba(0,0,0,.45)}

  /* Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ */
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:60}
  .modal .box{width:min(820px,92%);border-radius:16px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.2);box-shadow:0 18px 40px rgba(0,0,0,.45);padding:14px 16px;backdrop-filter:blur(6px);color:#fff}
  .modal h3{margin:6px 0 12px;font-size:18px}
  .btn{border:none;border-radius:10px;padding:8px 16px;cursor:pointer;color:#fff;box-shadow:0 6px 16px rgba(0,0,0,.35);background:linear-gradient(135deg,#34d399,#10b981);font-family:'iranyekan'}
  .btn.gray{background:linear-gradient(135deg,#64748b,#475569)}
  .box iframe{width:100%;height:60vh;border:none;border-radius:12px;background:#fff}

  /* ØªÙˆØ³Øª Ù¾ÛŒØ§Ù… Ø¨Ø§ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† */
  .toast{position:fixed;left:50%;bottom:-120px;transform:translateX(-50%);z-index:70;background:rgba(0,0,0,.75);color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 8px 22px rgba(0,0,0,.4);font-size:13.5px;opacity:0;transition:all .35s ease}
  .toast.show{bottom:14px;opacity:1}
  .toast.hide{bottom:-140px;opacity:0}
</style>
</head>
<body>
  <header>Ø¬ØºØ±Ø§ÙÛŒØ§ ğŸ“˜</header>

  <!-- Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ -->
  <div class="top-controls">
    <div class="box"><input id="searchBox" type="text" placeholder="Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ Ø¨ÛŒÙ† Ú©ØªØ§Ø¨â€ŒÙ‡Ø§..."></div>
    <div class="box">
      <select id="sortSelect">
        <option value="default">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ: Ù¾ÛŒØ´â€ŒÙØ±Ø¶</option>
        <option value="score">Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²</option>
        <option value="downloads">Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ø¯Ø§Ù†Ù„ÙˆØ¯</option>
        <option value="size">Ú©Ù…â€ŒØ­Ø¬Ù…â€ŒØªØ±ÛŒÙ†</option>
      </select>
    </div>
  </div>

  <!-- ÛŒØ§Ø²Ø¯Ù‡Ù… -->
  <section class="panel">
    <h2>Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ØŒ Ù¾Ø§ÛŒÙ‡ ÛŒØ§Ø²Ø¯Ù‡Ù…</h2>
    <ul class="books" id="list11">
      <li>
        <div class="book-card"
             data-id="geo11-test"
             data-title="Ù¾Ø±Ø³Ø´â€ŒÙ‡Ø§ÛŒ Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ (Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡) â€“ Ø®ÛŒÙ„ÛŒ Ø³Ø¨Ø²"
             data-download="https://mega.nz/file/EygHRLaZ#XYM70813eKudH6DVdHsdduHbCb9I5d-W6NqhVDMngfs"
             data-size="88"
             data-buy="https://www.digikala.com/product/dkp-9512809/Ú©ØªØ§Ø¨-Ù¾Ø±Ø³Ø´-Ù‡Ø§ÛŒ-Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡-Ø§ÛŒ-Ø¬ØºØ±Ø§ÙÛŒØ§-2-Ø§Ø«Ø±-Ø²Ù‡Ø±Ø§-Ù†Ø¹Ù…ØªÛŒ-Ùˆ-Ø§Ù„Ù‡Ù‡-Ù‡Ù…Ø§ÛŒÙˆÙ†-Ø²Ø§Ø¯Ù‡-Ø§Ù†ØªØ´Ø§Ø±Ø§Øª-Ø®ÛŒÙ„ÛŒ-Ø³Ø¨Ø²/"
             data-score="?" data-scoretext="Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©ØªØ§Ø¨ Ø¯Ø± Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§ Ø§Ù…ØªÛŒØ§Ø²ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.">
          <!-- Ø±Ø§Ø³Øª: Ø³ØªØ§Ø±Ù‡ + Ø®Ø±ÛŒØ¯ -->
          <div class="right-col">
            <div class="badge star-btn" title="Ø§Ù…ØªÛŒØ§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.431L24 9.753l-6 5.847 1.416 8.263L12 19.771 4.584 23.863 6 15.6 0 9.753l8.332-1.735z"/></svg>
            </div>
            <div class="meta score-text">ØŸ</div>
            <a class="badge buy-btn" title="Ø®Ø±ÛŒØ¯ Ø§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 4h-2l-1 2h2l2.68 9H19l2-8H8l-.62-2zM7 20a2 2 0 110-4 2 2 0 010 4zm10 0a2 2 0 110-4 2 2 0 010 4z"/></svg>
            </a>
          </div>

          <div class="title tclick">Ù¾Ø±Ø³Ø´â€ŒÙ‡Ø§ÛŒ Ú†Ù‡Ø§Ø±Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ (Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡) â€“ Ø®ÛŒÙ„ÛŒ Ø³Ø¨Ø² <span class="dlcount"></span></div>

          <!-- Ú†Ù¾: Ø¯Ø§Ù†Ù„ÙˆØ¯ + Ø§Ø´ØªØ±Ø§Ú© -->
          <div class="left-col">
            <a class="badge dl-btn" title="Ø¯Ø§Ù†Ù„ÙˆØ¯" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 16l4-5h-3V4h-2v7H8l4 5zm8 2H4v2h16v-2z"/></svg>
            </a>
            <div class="size-lbl">88MB</div>
            <div class="badge share-btn" title="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-0.76 0-1.44 0.3-1.96 0.77l-7.13-4.11c0.05-0.25 0.09-0.5 0.09-0.76s-0.04-0.51-0.09-0.76l7.09-4.1c0.54 0.5 1.25 0.81 2.04 0.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.26 0.04 0.51 0.09 0.76l-7.09 4.1c-0.54-0.5-1.25-0.81-2.04-0.81-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.04-0.81l7.13 4.11c-0.05 0.23-0.08 0.47-0.08 0.72 0 1.61 1.31 2.92 2.92 2.92S21 17.69 21 16.08s-1.31-2.92-2.92-2.92z"/></svg>
            </div>
          </div>
        </div>
      </li>

      <li>
        <div class="book-card"
             data-id="geo11-shab"
             data-title="Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù† â€“ Ø®ÛŒÙ„ÛŒ Ø³Ø¨Ø²"
             data-download="https://mega.nz/file/R2YkAK7L#s2sUeQnr4IZ4IEx2vr9vFQMNZmSAcdDw4ggAtAatlqw"
             data-size="23"
             data-buy="https://www.digikala.com/product/dkp-820916/Ú©ØªØ§Ø¨-Ø´Ø¨-Ø§Ù…ØªØ­Ø§Ù†-Ø¬ØºØ±Ø§ÙÛŒØ§-Ù¾Ø§ÛŒÙ‡-ÛŒØ§Ø²Ø¯Ù‡Ù…-Ø§Ø«Ø±-Ø³ÛŒØ¯Ù‡-Ù…Ø±ÛŒÙ…-Ø·Ø§Ù‡Ø±ÛŒ/"
             data-score="4.4" data-scoretext="Û´.Û´ Ø§Ù…ØªÛŒØ§Ø² Ø§Ø² Û²Û¶ Ø±Ø£ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ø¯Ø± Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§">
          <div class="right-col">
            <div class="badge star-btn" title="Ø§Ù…ØªÛŒØ§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.431L24 9.753l-6 5.847 1.416 8.263L12 19.771 4.584 23.863 6 15.6 0 9.753l8.332-1.735z"/></svg>
            </div>
            <div class="meta score-text">4.4</div>
            <a class="badge buy-btn" title="Ø®Ø±ÛŒØ¯ Ø§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 4h-2l-1 2h2l2.68 9H19l2-8H8l-.62-2zM7 20a2 2 0 110-4 2 2 0 010 4zm10 0a2 2 0 110-4 2 2 0 010 4z"/></svg>
            </a>
          </div>

          <div class="title tclick">Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù† â€“ Ø®ÛŒÙ„ÛŒ Ø³Ø¨Ø² <span class="dlcount"></span></div>

          <div class="left-col">
            <a class="badge dl-btn" title="Ø¯Ø§Ù†Ù„ÙˆØ¯" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 16l4-5h-3V4h-2v7H8l4 5zm8 2H4v2h16v-2z"/></svg>
            </a>
            <div class="size-lbl">23MB</div>
            <div class="badge share-btn" title="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-0.76 0-1.44 0.3-1.96 0.77l-7.13-4.11c0.05-0.25 0.09-0.5 0.09-0.76s-0.04-0.51-0.09-0.76l7.09-4.1c0.54 0.5 1.25 0.81 2.04 0.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.26 0.04 0.51 0.09 0.76l-7.09 4.1c-0.54-0.5-1.25-0.81-2.04-0.81-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.04-0.81l7.13 4.11c-0.05 0.23-0.08 0.47-0.08 0.72 0 1.61 1.31 2.92 2.92 2.92S21 17.69 21 16.08s-1.31-2.92-2.92-2.92z"/></svg>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </section>

  <!-- Ø¯Ù‡Ù… -->
  <section class="panel">
    <h2>Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ØŒ Ù¾Ø§ÛŒÙ‡ Ø¯Ù‡Ù…</h2>
    <ul class="books" id="list10">
      <li>
        <div class="book-card"
             data-id="geo10-shab"
             data-title="Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù† â€“ Ø®ÛŒÙ„ÛŒ Ø³Ø¨Ø²"
             data-download="https://s32.picofile.com/file/8481978634/%D8%AC%D8%BA%D8%B1%D8%A7%D9%81%DB%8C%D8%A7_%D8%AF%D9%87%D9%85%D8%8C_%D8%B4%D8%A8_%D8%A7%D9%85%D8%AA%D8%AD%D8%A7%D9%86_B_U_L.pdf.html"
             data-size="24"
             data-buy="https://www.digikala.com/product/dkp-4123378/Ú©ØªØ§Ø¨-Ø´Ø¨-Ø§Ù…ØªØ­Ø§Ù†-Ø¬ØºØ±Ø§ÙÛŒØ§-Ø§ÛŒØ±Ø§Ù†-Ø¯Ù‡Ù…-Ø§Ø«Ø±-Ù…Ù‡Ø¯ÛŒ-Ú©Ø§Ø±Ø¯Ø§Ù†-Ùˆ-Ø´Ø§Ø¯ÛŒ-Ú©Ø§Ø±ÛŒØ§Ù†-Ø§Ù†ØªØ´Ø§Ø±Ø§Øª-Ø®ÛŒÙ„ÛŒ-Ø³Ø¨Ø²/"
             data-score="4.5" data-scoretext="Û´.Ûµ Ø§Ù…ØªÛŒØ§Ø² Ø§Ø² Û¶Û· Ø±Ø£ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ø¯Ø± Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§">
          <div class="right-col">
            <div class="badge star-btn" title="Ø§Ù…ØªÛŒØ§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.431L24 9.753l-6 5.847 1.416 8.263L12 19.771 4.584 23.863 6 15.6 0 9.753l8.332-1.735z"/></svg>
            </div>
            <div class="meta score-text">4.5</div>
            <a class="badge buy-btn" title="Ø®Ø±ÛŒØ¯ Ø§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 4h-2l-1 2h2l2.68 9H19l2-8H8l-.62-2zM7 20a2 2 0 110-4 2 2 0 010 4zm10 0a2 2 0 110-4 2 2 0 010 4z"/></svg>
            </a>
          </div>

          <div class="title tclick">Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù† â€“ Ø®ÛŒÙ„ÛŒ Ø³Ø¨Ø² <span class="dlcount"></span></div>

          <div class="left-col">
            <a class="badge dl-btn" title="Ø¯Ø§Ù†Ù„ÙˆØ¯" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 16l4-5h-3V4h-2v7H8l4 5zm8 2H4v2h16v-2z"/></svg>
            </a>
            <div class="size-lbl">24MB</div>
            <div class="badge share-btn" title="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-0.76 0-1.44 0.3-1.96 0.77l-7.13-4.11c0.05-0.25 0.09-0.5 0.09-0.76s-0.04-0.51-0.09-0.76l7.09-4.1c0.54 0.5 1.25 0.81 2.04 0.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.26 0.04 0.51 0.09 0.76l-7.09 4.1c-0.54-0.5-1.25-0.81-2.04-0.81-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.04-0.81l7.13 4.11c-0.05 0.23-0.08 0.47-0.08 0.72 0 1.61 1.31 2.92 2.92 2.92S21 17.69 21 16.08s-1.31-2.92-2.92-2.92z"/></svg>
            </div>
          </div>
        </div>
      </li>

      <li>
        <div class="book-card"
             data-id="geo10-dars"
             data-title="Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ â€“ Ø®ÛŒÙ„ÛŒ Ø³Ø¨Ø²"
             data-download="https://s32.picofile.com/file/8481961634/%D8%AF%D8%B1%D8%B3%D9%86%D8%A7%D9%85%D9%87_%D8%AC%D8%BA%D8%B1%D8%A7%D9%81%DB%8C%D8%A7_%D8%AF%D9%87%D9%85_%D8%A8%D8%B1_%D8%B9%D9%85%D8%B1_%D9%84%D8%B9%D9%86%D8%AA.pdf.html"
             data-size="36"
             data-buy="https://www.digikala.com/product/dkp-1874006/Ú©ØªØ§Ø¨-Ù¾Ø±Ø³Ø´-Ù‡Ø§ÛŒ-Ú†Ù‡Ø§Ø±-Ú¯Ø²ÛŒÙ†Ù‡-Ø§ÛŒ-Ø¬ØºØ±Ø§ÙÛŒØ§-Ø¬Ø§Ù…Ø¹-Ø¯Ù‡Ù…-Ùˆ-ÛŒØ§Ø²Ø¯Ù‡Ù…-Ùˆ-Ø¯ÙˆØ§Ø²Ø¯Ù‡Ù…-Ø±Ø´ØªÙ‡-Ø§Ù†Ø³Ø§Ù†ÛŒ-Ø§Ø«Ø±-Ø²Ù‡Ø±Ø§-Ù†Ø¹Ù…ØªÛŒ-Ùˆ-Ø§Ù„Ù‡Ù‡-Ù‡Ù…Ø§ÛŒÙˆÙ†-Ø²Ø§Ø¯Ù‡-Ø§Ù†ØªØ´Ø§Ø±Ø§Øª-Ø®ÛŒÙ„ÛŒ-Ø³Ø¨Ø²/"
             data-score="4.2" data-scoretext="Û´.Û² Ø§Ù…ØªÛŒØ§Ø² Ø§Ø² Û´Ûµ Ø±Ø£ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ø¯Ø± Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§">
          <div class="right-col">
            <div class="badge star-btn" title="Ø§Ù…ØªÛŒØ§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.431L24 9.753l-6 5.847 1.416 8.263L12 19.771 4.584 23.863 6 15.6 0 9.753l8.332-1.735z"/></svg>
            </div>
            <div class="meta score-text">4.2</div>
            <a class="badge buy-btn" title="Ø®Ø±ÛŒØ¯ Ø§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 4h-2l-1 2h2l2.68 9H19l2-8H8l-.62-2zM7 20a2 2 0 110-4 2 2 0 010 4zm10 0a2 2 0 110-4 2 2 0 010 4z"/></svg>
            </a>
          </div>

          <div class="title tclick">Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ â€“ Ø®ÛŒÙ„ÛŒ Ø³Ø¨Ø² <span class="dlcount"></span></div>

          <div class="left-col">
            <a class="badge dl-btn" title="Ø¯Ø§Ù†Ù„ÙˆØ¯" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 16l4-5h-3V4h-2v7H8l4 5zm8 2H4v2h16v-2z"/></svg>
            </a>
            <div class="size-lbl">36MB</div>
            <div class="badge share-btn" title="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-0.76 0-1.44 0.3-1.96 0.77l-7.13-4.11c0.05-0.25 0.09-0.5 0.09-0.76s-0.04-0.51-0.09-0.76l7.09-4.1c0.54 0.5 1.25 0.81 2.04 0.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.26 0.04 0.51 0.09 0.76l-7.09 4.1c-0.54-0.5-1.25-0.81-2.04-0.81-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.04-0.81l7.13 4.11c-0.05 0.23-0.08 0.47-0.08 0.72 0 1.61 1.31 2.92 2.92 2.92S21 17.69 21 16.08s-1.31-2.92-2.92-2.92z"/></svg>
            </div>
          </div>
        </div>
      </li>
    </ul>
  </section>

  <div style="text-align:center">
    <a class="btn-back" href="index.html">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ</a>
  </div>

  <div id="counter"><span id="visit-count">Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø§ÛŒÙ† ØµÙØ­Ù‡</span></div>

  <!-- Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ -->
  <div class="modal" id="previewModal">
    <div class="box">
      <h3 id="prevTitle">Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</h3>
      <iframe id="prevFrame" src=""></iframe>
      <div style="display:flex;gap:8px;margin-top:10px;justify-content:flex-end">
        <button class="btn gray" id="closePrev">Ø¨Ø³ØªÙ†</button>
      </div>
    </div>
  </div>

  <!-- ØªÙˆØ³Øª -->
  <div class="toast" id="toast"></div>

<script>
  // ------ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø§Ø²Ø¯ÛŒØ¯ ØµÙØ­Ù‡
  async function loadVisits(){
    const slug='geography';
    try{
      const r=await fetch(`/api/visits?slug=${encodeURIComponent(slug)}`,{cache:'no-store'});
      const d=await r.json();
      if(!r.ok||typeof d.value!=='number')throw 0;
      document.getElementById('visit-count').textContent=`Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø§ÛŒÙ† ØµÙØ­Ù‡: ${d.value}`;
      await fetch(`/api/log?slug=${encodeURIComponent(slug)}`,{
        method:'POST',headers:{'Content-Type':'application/json'},
        body:JSON.stringify({ua:navigator.userAgent})
      });
    }catch{
      document.getElementById('visit-count').textContent='Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡';
    }
  }
  loadVisits();

  // ------ Toast
  let toastTimer=null;
  function showToast(txt){
    const t=document.getElementById('toast');
    t.textContent=txt;
    t.classList.remove('hide');
    t.classList.add('show');
    clearTimeout(toastTimer);
    toastTimer=setTimeout(()=>{
      t.classList.remove('show');
      t.classList.add('hide');
    },6000); // Ø´Ø´ Ø«Ø§Ù†ÛŒÙ‡
  }

  // ------ LocalStorage helpers
  function lsGet(k,d){try{return JSON.parse(localStorage.getItem(k))??d}catch{return d}}
  function lsSet(k,v){localStorage.setItem(k,JSON.stringify(v))}

  // ------ Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´
  const prevModal=document.getElementById('previewModal');
  const prevTitle=document.getElementById('prevTitle');
  const prevFrame=document.getElementById('prevFrame');
  document.getElementById('closePrev').onclick=()=>{prevModal.style.display='none'; prevFrame.src=''};
  prevModal.addEventListener('click',(e)=>{ if(e.target===prevModal){prevModal.style.display='none'; prevFrame.src=''} });

  // ------ API counter for downloads (Ù‡Ù…Ø§Ù† Ø³Ø±ÙˆÛŒØ³ Ø¨Ø§Ø²Ø¯ÛŒØ¯)
  async function getGlobalDl(bookId){
    try{
      const r=await fetch(`/api/visits?slug=${encodeURIComponent('dl_'+bookId)}`,{cache:'no-store'});
      const d=await r.json();
      if(!r.ok||typeof d.value!=='number')throw 0;
      return d.value;
    }catch{return null}
  }
  async function incGlobalDl(bookId){
    try{
      await fetch(`/api/log?slug=${encodeURIComponent('dl_'+bookId)}`,{
        method:'POST',headers:{'Content-Type':'application/json'},
        body:JSON.stringify({ua:navigator.userAgent})
      });
    }catch{}
  }

  // ------ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
  const cards=document.querySelectorAll('.book-card');
  cards.forEach(card=>{
    const id=card.dataset.id,
          title=card.dataset.title,
          dlsrc=card.dataset.download,
          size=card.dataset.size,
          buy=card.dataset.buy,
          score=card.dataset.score,
          scoreText=card.dataset.scoretext;

    const dlBtn=card.querySelector('.dl-btn');
    const shareBtn=card.querySelector('.share-btn');
    const buyBtn=card.querySelector('.buy-btn');
    const starBtn=card.querySelector('.star-btn');
    const scoreEl=card.querySelector('.score-text');
    const dlCountEl=card.querySelector('.dlcount');

    // set attributes
    dlBtn.href=dlsrc;
    buyBtn.href=buy;
    scoreEl.textContent=score;
    card.querySelector('.size-lbl').textContent=size+'MB';

    // Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡: ØªØ±Ú©ÛŒØ¨ÛŒ Ø§Ø² local + server
    async function refreshCount(){
      const local=lsGet('dl_'+id,0);
      const remote=await getGlobalDl(id);
      const total=(remote??0)+local; // Ø§Ú¯Ø± Ù†Øª Ù†Ø¯Ø§Ø´ØªØŒ Ø­Ø¯Ø§Ù‚Ù„ local
      card.dataset.dl = total;
      dlCountEl.textContent = total>0 ? `(${total} Ø¯Ø§Ù†Ù„ÙˆØ¯)` : '';
    }
    refreshCount();

    dlBtn.addEventListener('click',async (e)=>{
      // Ø§ÙØ²Ø§ÛŒØ´ local + Ø³Ø±ÙˆØ±
      lsSet('dl_'+id, lsGet('dl_'+id,0)+1);
      dlBtn.style.transform='scale(1.15)';setTimeout(()=>dlBtn.style.transform='',150);
      refreshCount(); // Ù†Ù…Ø§ÛŒØ´ Ø³Ø±ÛŒØ¹
      await incGlobalDl(id); // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±
      setTimeout(refreshCount,900); // Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ ÛŒÚ© Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ø¹Ø¯
    });

    // Ø§Ø´ØªØ±Ø§Ú© Ú¯Ø°Ø§Ø±ÛŒ Ù„ÛŒÙ†Ú© Ø¯Ø§Ù†Ù„ÙˆØ¯
    shareBtn.addEventListener('click',async ()=>{
      const shareData={title, text:title+' - Ø¯Ø§Ù†Ù„ÙˆØ¯', url:dlsrc};
      try{
        if(navigator.share){ await navigator.share(shareData); }
        else{ await navigator.clipboard.writeText(dlsrc); showToast('Ù„ÛŒÙ†Ú© Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¯Ø± Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯ Ú©Ù¾ÛŒ Ø´Ø¯'); }
      }catch{}
    });

    // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ø§Ù…ØªÛŒØ§Ø²
    starBtn.addEventListener('click',()=>{
      showToast(scoreText);
      starBtn.style.transform='scale(1.15)'; setTimeout(()=>starBtn.style.transform='',150);
    });

    // Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´: Ø¹Ù†ÙˆØ§Ù†
    card.querySelector('.tclick').addEventListener('click',()=>{
      prevTitle.textContent='Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Â«'+title+'Â»';
      prevFrame.src='https://docs.google.com/gview?embedded=1&url='+encodeURIComponent(dlsrc);
      prevModal.style.display='flex';
    });
  });

  // ------ Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ Ùˆ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ
  const searchBox=document.getElementById('searchBox');
  searchBox.addEventListener('input',()=>filterAndSort());
  const sortSelect=document.getElementById('sortSelect');
  sortSelect.addEventListener('change',()=>filterAndSort());

  function filterAndSort(){
    const q=searchBox.value.trim();
    document.querySelectorAll('.books').forEach(ul=>{
      const items=Array.from(ul.querySelectorAll('li'));
      // ÙÛŒÙ„ØªØ±
      items.forEach(li=>{
        const card=li.querySelector('.book-card');
        const t=card.dataset.title;
        li.style.display = (!q || t.includes(q)) ? '' : 'none';
      });
      // Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ
      const mode=sortSelect.value;
      const visible=items.filter(li=>li.style.display!=='none');
      visible.sort((a,b)=>{
        const ca=a.querySelector('.book-card'), cb=b.querySelector('.book-card');
        if(mode==='size'){
          return parseFloat(ca.dataset.size)-parseFloat(cb.dataset.size); // Ú©Ù…â€ŒØ­Ø¬Ù…â€ŒØªØ±ÛŒÙ†
        }else if(mode==='score'){
          const sA=parseFloat(ca.dataset.score)||0, sB=parseFloat(cb.dataset.score)||0;
          return sB-sA;
        }else if(mode==='downloads'){
          const dA=parseInt(ca.dataset.dl||'0'), dB=parseInt(cb.dataset.dl||'0');
          return dB-dA;
        }
        return 0;
      });
      visible.forEach(li=>ul.appendChild(li));
    });
  }
</script>
</body>
</html>
