<html lang="fa" dir="rtl"><head></head><body><start_of_user_uploaded_file: fonoon_podcast_player.html="">


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ§Ø±ÛŒØ® </title>
<style>
  @font-face{
    font-family:'iranyekanX';
    src:url('IRANYekanX-Light.woff2') format('woff2');
  }
  *{box-sizing:border-box}
  body {
    font-family: 'iranyekanX', sans-serif;
    margin: 0;
    padding: 0;
    color: #fff;
    background:
        radial-gradient(circle at 20% 20%, #ff9a9e, transparent 40%),
        radial-gradient(circle at 80% 25%, #fad0c4, transparent 42%),
        radial-gradient(circle at 20% 80%, #fbc2eb, transparent 45%),
        radial-gradient(circle at 80% 75%, #a18cd1, transparent 40%),
        linear-gradient(180deg, #f6d365 0%, #fda085 100%);
    background-attachment:fixed;min-height:100vh;position:relative;
  }
  body::before{content:"";position:fixed;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.15),rgba(0,0,0,.25));pointer-events:none;z-index:0}
  header{
    text-align:center;font-weight:800;margin:26px 0 10px;font-size:38px;
    background:linear-gradient(90deg,#60a5fa,#a78bfa,#34d399,#fbbf24,#f87171);
    background-size:400% 400%;
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    animation:headGrad 18s ease infinite;text-shadow:0 0 10px rgba(255,255,255,.25);position:relative;z-index:1
  }
  @keyframes headGrad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  /* toolbar */
  .toolbar{width:min(920px,95%);margin:0 auto 8px;display:flex;gap:10px;justify-content:space-between;align-items:center;z-index:2;position:relative}
  .search-box{flex:1;position:relative}
  .search-input{
    width:100%;border:none;border-radius:12px;padding:12px 40px 12px 36px;
    background:rgba(255,255,255,.14);color:#fff;font-family:inherit;outline:none;
    box-shadow:0 8px 18px rgba(0,0,0,.28);border:1px solid rgba(255,255,255,.15)
  }
  .search-input::placeholder{color:#FFFFFF}
  .search-clear{
    position:absolute;left:10px;top:50%;transform:translateY(-50%);
    width:22px;height:22px;border-radius:50%;background:rgba(255,255,255,.2);
    display:none;align-items:center;justify-content:center;cursor:pointer;color:#fff;
    box-shadow:0 4px 10px rgba(0,0,0,.3);font-weight:900
  }
  .search-icon{position:absolute;right:10px;top:50%;transform:translateY(-50%);opacity:.9}
  .sort-btn{
    border:none;border-radius:12px;padding:12px 16px;cursor:pointer;color:#fff;
    background:linear-gradient(135deg,#1C93E3,#2ea3f2);
    box-shadow:0 8px 18px rgba(28,147,227,.4);
    font-family:inherit;
  }

  .panel{
    width:min(920px,95%);margin:12px auto 20px;padding:22px 20px 26px;background:rgba(255,255,255,.12);
    border:1px solid rgba(255,255,255,.2);border-radius:18px;box-shadow:0 10px 25px rgba(0,0,0,.35);
    backdrop-filter:blur(6px);position:relative;z-index:1
  }
  .panel h2{margin:0 0 18px;font-size:22px;color:#f1f5f9;text-shadow:0 2px 8px rgba(0,0,0,.4)}
  ul.books{list-style:none;margin:0;padding:0}
  li{margin:10px 0}

  /* Ú©Ø§Ø±Øª Ú©ØªØ§Ø¨ â€“ Ú¯Ø±ÛŒØ¯ Ø¨Ø§ Ø³ØªÙˆÙ† Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ Ø³Ù…Øª Ú†Ù¾ */
  .book-card{
    display:grid; grid-template-columns:134px 1fr; align-items:center;
    direction:ltr; gap:10px;text-decoration:none;color:#fff;
    background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.15);padding:14px;border-radius:12px;
    box-shadow:0 6px 18px rgba(0,0,0,.28);transition:transform .18s ease,box-shadow .18s ease,background .18s ease;position:relative; cursor:pointer;
  }
  .book-card:hover{transform:translateY(-3px);background:rgba(255,255,255,.16);box-shadow:0 12px 28px rgba(0,0,0,.45)}
  .title{font-size:16.5px;line-height:1.6;white-space:normal;word-wrap:break-word;text-shadow:0 2px 6px rgba(0,0,0,.45);direction:rtl}
  .dcount{font-size:13px;opacity:.9}

  .left-acts{
    display:grid; grid-template-columns:46px 46px;
    grid-template-rows:38px 14px 38px 14px 38px 14px;
    gap:6px 10px; align-items:center; justify-items:center; min-width:134px;
  }
  .left-acts .icon-wrap{
    width:38px;height:38px;display:flex;align-items:center;justify-content:center;cursor:pointer;
    border-radius:10px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.18);
    box-shadow:0 6px 16px rgba(0,0,0,.35); transition:transform .15s ease, background .15s ease
  }
  .left-acts .icon-wrap:hover{ transform:translateY(-2px); background:rgba(255,255,255,.16) }
  .left-acts svg{ width:22px;height:22px; fill:#fff; filter: drop-shadow(0 2px 4px rgba(0,0,0,.45));}
  .under-txt{font-size:11.5px;color:#eaeaea;direction:rtl}

  .dl{grid-column:1;grid-row:1}
  .star{grid-column:2;grid-row:1}
  .size-label{grid-column:1;grid-row:2}
  .rate-label{grid-column:2;grid-row:2}
  .share{grid-column:1;grid-row:3}
  .buy{grid-column:2;grid-row:3}
  .share-label{grid-column:1;grid-row:4}
  .comment{grid-column:2;grid-row:5}
  .cmt-label{grid-column:2;grid-row:6}

  .star-tip{
    position:absolute; right:134px; bottom:10px; background:rgba(0,0,0,.65);
    border:1px solid rgba(255,255,255,.15); color:#fff; font-size:12.5px; padding:6px 10px; border-radius:10px;
    box-shadow:0 10px 25px rgba(0,0,0,.35);
    opacity:0; transform:translateY(12px); pointer-events:none; transition:all .35s ease;
    max-width: 68%; line-height:1.8; direction:rtl
  }
  .star-tip.show{ opacity:1; transform:translateY(0) }
  .star-tip.hide{ opacity:0; transform:translateY(18px) }

  .btn-back{
    display:inline-block;margin:24px auto 10px;background:linear-gradient(135deg,#1C93E3,#2ea3f2);padding:12px 26px;color:#fff;text-decoration:none;border-radius:12px;box-shadow:0 8px 18px rgba(28,147,227,.4);transition:transform .15s ease, box-shadow .15s ease
  }
  .btn-back:hover{transform:translateY(-2px);box-shadow:0 12px 26px rgba(28,147,227,.6)}
  #counter{text-align:center;margin:12px 0 24px;font-size:15px;color:#eaeaea;text-shadow:0 2px 6px rgba(0,0,0,.45)}

  /* Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§ */
  .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,.5); z-index:50 }
  .modal .box{
    width:min(680px,92%); border-radius:16px; background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.2);
    box-shadow:0 18px 40px rgba(0,0,0,.45); padding:14px 16px; backdrop-filter:blur(6px); color:#fff; position:relative; transform:scale(.95); opacity:0; transition: all .25s ease; direction:rtl
  }
  .modal.show .box{ transform:scale(1); opacity:1; }
  .modal h3{ margin:6px 0 12px; font-size:18px }
  .modal .row{ display:flex; gap:8px; justify-content:flex-end; align-items:center; margin-top:8px; flex-wrap:wrap }
  .btn{ border:none; border-radius:10px; padding:8px 16px; cursor:pointer; color:#fff; box-shadow:0 6px 16px rgba(0,0,0,.35); background:linear-gradient(135deg,#34d399,#10b981); font-family:inherit }
  .btn.gray{ background:linear-gradient(135deg,#64748b,#475569) }

  .modal-sort{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,.5); z-index:60; }
  .modal-sort .box{
    width:min(520px,92%); border-radius:16px; background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.2);
    box-shadow:0 18px 40px rgba(0,0,0,.45); padding:14px 16px; backdrop-filter:blur(6px); color:#fff; position:relative; transform:scale(.94); opacity:0; transition: all .2s ease; direction:rtl
  }
  .modal-sort.show .box{ transform:scale(1); opacity:1; }
  .sort-title{ font-size:16px; margin-bottom:10px }
  .sort-list{ list-style:none; margin:0; padding:0 }
  .sort-list li{
    margin:8px 0; padding:10px 12px; border-radius:10px; background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.15);
    cursor:pointer; transition: all .15s ease;
  }
  .sort-list li:hover{ background: rgba(255,255,255,.16) }
  .sort-list li.active{ background: linear-gradient(135deg,#34d399,#10b981) }
  .modal-sort .row{ display:flex; gap:8px; justify-content:flex-end; margin-top:10px }

  .modal-cmt{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,.55); z-index:70; }
  .modal-cmt .box{
    width:min(720px,92%); border-radius:16px; background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.2);
    box-shadow:0 18px 40px rgba(0,0,0,.45); padding:14px 16px; backdrop-filter:blur(6px); color:#fff; position:relative; transform:translateY(20px); opacity:0; transition: all .25s ease; direction:rtl
  }
  .modal-cmt.show .box{ transform:translateY(0); opacity:1; }
  .cmt-list{ list-style:none; margin:6px 0 10px; padding:0; max-height:280px; overflow-y:auto }
  .cmt-item{ background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.15); padding:8px 10px; border-radius:10px; margin:8px 0 }
  .cmt-head{ display:flex; align-items:center; justify-content:space-between; font-size:12px; color:#e7e7e7; margin-bottom:4px }
  .cmt-text{ font-size:14.5px; line-height:1.8; white-space:pre-wrap }
  .cmt-input{ width:100%; min-height:70px; border-radius:10px; border:none; padding:10px; resize:vertical; font-family:inherit }
  .cmt-foot{ display:flex; gap:8px; justify-content:flex-end; margin-top:8px }
  .cmt-rule{ font-size:12px; opacity:.85; margin-top:6px; text-align:center }
  .cmt-name{ width:100%; border-radius:10px; border:none; padding:10px; margin:8px 0; font-family:inherit }

  /* Ù‚Ù„Ø¨ */
  .left-acts .fav{ grid-column:1; grid-row:5; }
  .left-acts .fav-label{ grid-column:1; grid-row:6; }
  .icon-wrap.fav .heart-filled{ display:none }
  .icon-wrap.fav.active .heart-filled{ display:block }
  .icon-wrap.fav.active .heart-outline{ display:none }

  /* ÙÛŒÙ„ØªØ± Ø¨Ø±Ú†Ø³Ø¨ (Ú†ÛŒÙ¾) */
  #tagsModal .box, #tagsModal .sort-title, #tagsModal .tag-group-title, #tagsModal .chip {
    font-family: 'IRANYekanX-Light','IRANYekanX','iranyekan','IranYekan','Tahoma',sans-serif !important;
  }
  .tags-container{ display:block }
  .tag-group{ margin:10px 0 12px }
  .tag-group-title{ font-weight:800; opacity:.95; margin:6px 0 }
  .tag-group-body{ display:flex; flex-wrap:wrap; gap:8px }
  .chip{
    display:inline-flex; align-items:center; gap:6px;
    padding:6px 12px; border-radius:999px; cursor:pointer;
    background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.15);
    transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
    user-select:none; font-size:14px; line-height:1; color:inherit;
  }
  .chip:active{ transform:scale(.98) }
  .chip.active{
    background:linear-gradient(135deg,#34d399,#10b981);
    border-color:transparent; color:#fff;
    box-shadow:0 6px 16px rgba(0,0,0,.25);
  }
  .btn-danger{ background:rgba(239,68,68,.12); border:1px solid rgba(239,68,68,.7); color:#fecaca }
  .btn-danger:hover{ filter:brightness(1.05) }
  /* --- Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ùˆ Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø±ÙˆØ³ --- */
.left-acts .view-btn {
  grid-column: 1; grid-row: 1; /* Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ù†Ù„ÙˆØ¯ */
}
.lessons-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-top: 15px;
  max-height: 500px;
  overflow-y: auto;
}
.lesson-box {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  border-radius: 12px;
  padding: 15px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.lesson-box h4 {
  margin: 0 0 5px;
  font-size: 16px;
  text-align: center;
  color: #81e6d9;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  padding-bottom: 8px;
}
.lesson-btns {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.btn-link {
  display: block;
  text-align: center;
  background: rgba(255,255,255,0.1);
  color: #fff;
  text-decoration: none;
  padding: 8px;
  border-radius: 8px;
  font-size: 13.5px;
  transition: all 0.2s;
  border: 1px solid rgba(255,255,255,0.05);
  cursor: pointer;
}
.btn-link:hover {
  background: linear-gradient(135deg,#34d399,#10b981);
  border-color: transparent;
  transform: translateX(-3px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* --- Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ù„ÛŒØ± ØµÙˆØªÛŒ --- */
.audio-player-container {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 12px;
    padding: 20px;
    margin-top: 10px;
    text-align: center;
    direction: ltr; /* Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ ØµÙˆØªÛŒ */
}
.audio-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    margin-top: 15px;
}
.audio-btn {
    background: none;
    border: 1px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #fff;
    transition: all 0.2s;
}
.audio-btn.main-play {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg,#34d399,#10b981);
    border: none;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
.audio-btn:hover {
    transform: scale(1.05);
    background-color: rgba(255,255,255,0.1);
}
.audio-btn.main-play:hover {
    transform: scale(1.05);
}
.audio-progress {
    width: 100%;
    margin-top: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 12px;
    color: #eee;
}
/* Ø§Ø³ØªØ§ÛŒÙ„ Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª Ø¨Ø±Ø§ÛŒ Ø±Ù†Ú¯ Ø³Ø¨Ø² Ù‚Ø¨Ù„ Ø§Ø² Ø¯Ø§ÛŒØ±Ù‡ */
.progress-bar {
    flex: 1;
    -webkit-appearance: none;
    height: 6px;
    background: rgba(255,255,255,0.2);
    border-radius: 5px;
    outline: none;
    cursor: pointer;
    /* Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø±Ù†Ú¯ Ø³Ø¨Ø² Ù‚Ø¨Ù„ Ø§Ø² Ø¯Ø§ÛŒØ±Ù‡ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¢Ù¾Ø¯ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆØ¯ */
}

.progress-bar::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    background: #34d399;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid #fff;
}

/* Ù…ØªÙ† Ø±ÛŒØ² Ø«Ø§Ù†ÛŒÙ‡ Ú©Ù†Ø§Ø± Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
.skip-label {
    font-size: 9px;
    display: block;
    margin-top: -2px;
}

/* Ø§Ø³ØªØ§ÛŒÙ„ ØªØµÙˆÛŒØ± Ù…Ø§ÛŒÙ†Ø¯ Ù…Ù¾ Ø¯Ø± Ø­Ø§Ù„Øª ØªÙ…Ø§Ù… ØµÙØ­Ù‡ */
.mindmap-img {
    max-width: 100%;
    transition: transform 0.3s ease;
    cursor: zoom-in;
}
.fullscreen-img {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    object-fit: contain;
    background: black;
    z-index: 10001;
    cursor: zoom-out;
}

</style>


  <script>
    window.API_BASE = "https://hidden-forest-5a81.mohamadgpt19.workers.dev";
  </script>
  
<header> ØªØ§Ø±ÛŒØ® ğŸ“˜</header>

<div class="toolbar">
  <div class="search-box">
    <input id="searchInput" class="search-input" type="text" placeholder="Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ Ø¨ÛŒÙ† Ú©ØªØ§Ø¨â€ŒÙ‡Ø§">
    <span class="search-icon">ğŸ”</span>
    <span id="searchClear" class="search-clear">Ã—</span>
  </div>
  <button id="btnSort" class="sort-btn">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ: Ù¾ÛŒØ´â€ŒÙØ±Ø¶</button>
  <button id="btnTags" class="sort-btn">Ø¨Ø±Ú†Ø³Ø¨</button>
</div>

<!-- Ø¬Ø§Ù…Ø¹ (Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ 10ØŒ 11ØŒ 12) -->


<!-- Ù¾Ø§ÛŒÙ‡ ÛŒØ§Ø²Ø¯Ù‡Ù… -->
<section class="panel" data-panel="11">
  <h2>Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ ØªØ§Ø±ÛŒØ®ØŒ Ù¾Ø§ÛŒÙ‡ ÛŒØ§Ø²Ø¯Ù‡Ù…</h2>
  <ul class="books" id="list11">
    
        <li data-id="lessons-package-11">
      <div class="book-card" data-href="#" style="display: flex; align-items: center; padding: 8px 12px; gap: 12px; min-height: auto; grid-template-columns: auto 1fr;">
        <div class="left-acts" style="min-width: 50px; width: auto; display: flex; justify-content: center; align-items: center; grid-template-columns: none; grid-template-rows: none;"><div class="icon-wrap view-btn" title="Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØªÙˆØ§ÛŒ Ø¯Ø±ÙˆØ³">
            <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
          </div>
                        <div class="icon-wrap dl" style="display:none"></div>
                        <div class="icon-wrap star" style="display:none"></div>
                        <div class="under-txt size-label" style="display:none"></div>
                        <div class="under-txt rate-label" style="display:none"></div>
                        <div class="icon-wrap share" style="display:none"></div>
                        <div class="icon-wrap buy" style="display:none"></div>
                        <div class="under-txt share-label" style="display:none"></div>
                        <div class="icon-wrap comment" style="display:none"></div>
                        <div class="under-txt cmt-label" style="display:none"></div>
                        <div class="icon-wrap fav" style="display:none"></div>
                        <div class="under-txt fav-label" style="display:none"></div>
                    </div>

        <span class="title" style="font-size: 15px; margin: 0px; flex: 1 1 0%;">Ù¾Ú©ÛŒØ¬ Ù…Ø­ØªÙˆØ§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø±ÙˆØ³ <span class="dcount" data-dlc=""></span></span>
        
      </div>
    </li>

    
    
    <!-- Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø³Ø§ÛŒØ± Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ -->
  </ul>
</section>


<!-- Ù¾Ø§ÛŒÙ‡ Ø¯Ù‡Ù… -->


  

<div style="text-align:center">
  <a class="btn-back" href="index.html">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ</a>
</div>

<div id="counter"><span id="visit-count">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span></div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ -->
<div class="modal" id="previewModal">
  <div class="box">
    <h3 id="pvTitle">Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</h3>
    <div id="pvBody" style="line-height:1.9;font-size:14.5px;opacity:.95"></div>
    <div class="row"><button id="pvClose" class="btn gray">Ø¨Ø³ØªÙ†</button></div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ -->
<div class="modal-sort" id="sortModal">
  <div class="box">
    <div class="sort-title">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³</div>
    <ul class="sort-list" id="sortList">
      <li data-sort="default" class="active">Ù¾ÛŒØ´â€ŒÙØ±Ø¶</li>
      <li data-sort="rate">Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²</li>
      <li data-sort="downloads">Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ø¯Ø§Ù†Ù„ÙˆØ¯</li>
      <li data-sort="likes">Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ù„Ø§ÛŒÚ©</li>
      <li data-sort="size">Ú©Ù…â€ŒØ­Ø¬Ù…â€ŒØªØ±ÛŒÙ†</li>
    </ul>
    <div class="row"><button class="btn gray" id="btnSortClose">Ø¨Ø³ØªÙ†</button></div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§ -->
<div class="modal-cmt" id="cmtModal">
  <div class="box">
    <h3 id="cmtTitle">Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§</h3>
    <ul class="cmt-list" id="cmtList"></ul>
    <input class="cmt-name" id="cmtName" maxlength="40" placeholder="Ù†Ø§Ù… Ù…Ø³ØªØ¹Ø§Ø± (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)">
    <textarea class="cmt-input" id="cmtInput" placeholder="Ú©Ø§Ù…Ù†Øª Ø¬Ø¯ÛŒØ¯"></textarea>
    <div class="cmt-foot">
      <button class="btn gray" id="cmtClose">Ø¨Ø³ØªÙ†</button>
      <button class="btn" id="cmtSend">Ø§Ø±Ø³Ø§Ù„ Ú©Ø§Ù…Ù†Øª</button>
    </div>
    <div class="cmt-rule">Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¢Ø²Ø§Ø¯ Ø§Ø³Øª.</div>
  </div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ ÙÛŒÙ„ØªØ± Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§ -->
<div class="modal-sort" id="tagsModal" style="display:none">
  <div class="box">
    <div class="sort-title">ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§</div>
    <div id="tagsContainer" class="tags-container"></div>
    <div class="row" style="gap:8px; flex-wrap:wrap">
      <button class="btn btn-danger" type="button" id="btnTagsDeleteAll">Ø­Ø°Ù Ù‡Ù…Ù‡â€ŒÛŒ ÙÛŒÙ„ØªØ±Ù‡Ø§</button>
      <button class="btn gray" type="button" id="btnTagsCancel">Ù„ØºÙˆ</button>
      <button class="btn" type="button" id="btnTagsApply">Ø§Ø¹Ù…Ø§Ù„</button>
    </div>
  </div>
</div>

<script>
/* ---- Ú©Ù…Ú©â€ŒØªØ§Ø¨Ø¹ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ ---- */
const faDigits = n => (typeof n==='number'? n.toLocaleString('fa-IR') : (''+n).replace(/\d/g,d=>'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹'[d]));
const faRate = v => (v==null? 'ØŸ' : (''+v).replace(/\./g,'Ù«').replace(/\d/g,d=>'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹'[d]));

/* ---- Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø§Ø²Ø¯ÛŒØ¯ ØµÙØ­Ù‡ ---- */
async function loadVisits(){
  const slug='tarikh';
  try{
    const r=await fetch(API_BASE + `/api/visits?slug=${encodeURIComponent(slug)}`,{cache:'no-store'});
    const d=await r.json();
    if(!r.ok||typeof d.value!=='number')throw 0;
    document.getElementById('visit-count').textContent=`Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø§ÛŒÙ† ØµÙØ­Ù‡: ${faDigits(d.value)}`;
    await fetch(API_BASE + `/api/log?slug=${encodeURIComponent(slug)}`,{
      method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({ua:navigator.userAgent})
    });
  }catch{
    document.getElementById('visit-count').textContent='Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡';
  }
}
loadVisits();

/* ---- Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø«Ø§Ø¨Øª Ù‡Ø± Ú©ØªØ§Ø¨ ---- */
const bookMeta = {
  "fonoon10-majaraha": {
    "size": "30 MB",
    "rate": 4.5,
    "votes": 22,
    "buy": "https://www.digikala.com/product/dkp-4122281/Ú©ØªØ§Ø¨-Ù…Ø§Ø¬Ø±Ø§Ù‡Ø§ÛŒ-Ù…Ù†-Ùˆ-Ø¯Ø±Ø³Ø§Ù…-Ø¹Ù„ÙˆÙ…-Ùˆ-ÙÙ†ÙˆÙ†-Ø¯Ù‡Ù…-Ø§Ø«Ø±-Ø¬Ù…Ø¹ÛŒ-Ø§Ø²-Ù†ÙˆÛŒØ³Ù†Ø¯Ú¯Ø§Ù†-Ø§Ù†ØªØ´Ø§Ø±Ø§Øª-Ø®ÛŒÙ„ÛŒ-Ø³Ø¨Ø²/",
    "publisher": "Ø®ÛŒÙ„ÛŒâ€ŒØ³Ø¨Ø²",
    "tags": [
      "ØªØ³Øª",
      "Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡",
      "ØªØ´Ø±ÛŒØ­ÛŒ",
      "Ù¾Ø§ÛŒÙ‡ Ø¯Ù‡Ù…",
      "Ø®ÛŒÙ„ÛŒâ€ŒØ³Ø¨Ø²",
      "Ù…Ø§Ø¬Ø±Ø§Ù‡Ø§ÛŒ Ù…Ù† Ùˆ Ø¯Ø±Ø³Ø§Ù…"
    ],
    "downloads": 0
  },
  "fonoon10-shab": {
    "size": "26 MB",
    "rate": 4.5,
    "votes": 69,
    "buy": "https://www.digikala.com/product/dkp-4123728/Ú©ØªØ§Ø¨-Ø´Ø¨-Ø§Ù…ØªØ­Ø§Ù†-Ø¹Ù„ÙˆÙ…-Ùˆ-ÙÙ†ÙˆÙ†-Ø§Ø¯Ø¨ÛŒ-Ø¯Ù‡Ù…-Ø§Ù†Ø³Ø§Ù†ÛŒ-Ø§Ø«Ø±-Ù…Ø­Ù…Ø¯-Ø±Ø²Ù…ÛŒ-Ùˆ-ÙØ§Ø·Ù…Ù‡-Ø§Ú©Ø±Ø§Ù†-Ø§Ù†ØªØ´Ø§Ø±Ø§Øª-Ø®ÛŒÙ„ÛŒ-Ø³Ø¨Ø²/",
    "publisher": "Ø®ÛŒÙ„ÛŒâ€ŒØ³Ø¨Ø²",
    "tags": [
      "ØªØ³Øª",
      "Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡",
      "Ù¾Ø§ÛŒÙ‡ Ø¯Ù‡Ù…",
      "Ø®ÛŒÙ„ÛŒâ€ŒØ³Ø¨Ø²",
      "Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù†"
    ],
    "downloads": 0
  },
  "hist11-test": {
    "size": "186 MB",
    "rate": 4.6,
    "votes": 428,
    "buy": "https://www.digikala.com/product/dkp-3719434/Ú©ØªØ§Ø¨-Ù¾Ø±Ø³Ø´-Ù‡Ø§ÛŒ-Ú†Ù‡Ø§Ø±-Ú¯Ø²ÛŒÙ†Ù‡-Ø§ÛŒ-Ø¹Ù„ÙˆÙ…-Ùˆ-ÙÙ†ÙˆÙ†-Ø§Ø¯Ø¨ÛŒ-Ø¬Ø§Ù…Ø¹-Ø±Ø´ØªÙ‡-Ø§Ù†Ø³Ø§Ù†ÛŒ-Ø§Ø«Ø±-Ø¬Ù…Ø¹ÛŒ-Ø§Ø²-Ù†ÙˆÛŒØ³Ù†Ø¯Ú¯Ø§Ù†-Ø§Ù†ØªØ´Ø§Ø±Ø§Øª-Ø®ÛŒÙ„ÛŒ-Ø³Ø¨Ø²/",
    "publisher": "Ø®ÛŒÙ„ÛŒâ€ŒØ³Ø¨Ø²",
    "tags": [
      "ØªØ³Øª",
      "Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡",
      "Ø¬Ø§Ù…Ø¹ ( ÙˆÛŒÚ˜Ù‡ ÛŒ Ù‡Ø± Ø³Ù‡ Ù¾Ø§ÛŒÙ‡ )",
      "Ø®ÛŒÙ„ÛŒâ€ŒØ³Ø¨Ø²",
      "ØªØ³Øª Ú©Ù†Ú©ÙˆØ±ÛŒ"
    ],
    "downloads": 0
  }
};

/* ---- Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø­Ù„ÛŒ/Ø¹Ù…ÙˆÙ…ÛŒ ---- */
function lsGet(k,d){try{return JSON.parse(localStorage.getItem(k))??d}catch{return d}}
function lsSet(k,v){localStorage.setItem(k,JSON.stringify(v))}
const deviceId=(localStorage.getItem('device_id') || (()=>{const v='dvc_'+Math.random().toString(36).slice(2);localStorage.setItem('device_id',v);return v})());

/* ---- Ø¯Ø§Ù†Ù„ÙˆØ¯Ù‡Ø§ ---- */
async function getDownloads(book){
  try{
    const r=await fetch(API_BASE + `/api/downloads?book=${encodeURIComponent(book)}`,{cache:'no-store'});
    const d=await r.json(); if(!r.ok||typeof d.value!=='number') throw 0;
    return d.value;
  }catch{return lsGet('dl_'+book,0)}
}
async function addDownload(book){
  try{
    const r=await fetch(API_BASE + '/api/downloads',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({book,inc:1})});
    const d=await r.json(); if(!r.ok||typeof d.value!=='number') throw 0;
    return d.value;
  }catch{
    const v=lsGet('dl_'+book,0)+1; lsSet('dl_'+book,v); return v;
  }
}

/* ---- Ø¬Ø³Øªâ€ŒÙˆØ¬Ùˆ ---- */
const searchInput=document.getElementById('searchInput');
const searchClear=document.getElementById('searchClear');
function normalize(s){
  return String(s||'')
    .replace(/\u200c/g,' ')
    .replace(/[â€Œ\u00A0]/g,' ')
    .replace(/ÙŠ/g,'ÛŒ').replace(/Ùƒ/g,'Ú©')
    .replace(/\s+/g,' ')
    .toLowerCase();
}
function filterBooks(){
  const v=normalize(searchInput.value||'');
  document.querySelectorAll('.books li').forEach(li=>{
    const t=li.querySelector('.title').textContent;
    li.style.display = normalize(t).includes(v) ? '' : 'none';
  });
  searchClear.style.display = v? 'flex':'none';
}
searchInput.addEventListener('input',filterBooks);
searchClear.addEventListener('click',()=>{searchInput.value='';filterBooks();searchInput.focus()});

/* ---- Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ù¾Ù†Ù„â€ŒÙ…Ø­ÙˆØ± Ø¨Ø§ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØªØ±ØªÛŒØ¨ Ø§ÙˆÙ„ÛŒÙ‡ ---- */
const sortBtn=document.getElementById('btnSort');
const sortModal=document.getElementById('sortModal');
const sortList=document.getElementById('sortList');
const sortClose=document.getElementById('btnSortClose');
let currentSort='default';

function openSort(){
  sortModal.style.display = 'flex'; // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§ display flex
  setTimeout(() => sortModal.classList.add('show'), 10); // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ù„Ø§Ø³ show Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„
}
function closeSort(){sortModal.classList.remove('show');setTimeout(()=>sortModal.style.display='none',160)}
sortBtn.addEventListener('click',openSort);
sortClose.addEventListener('click',closeSort);
sortModal.addEventListener('click',e=>{if(e.target===sortModal)closeSort()});

/* Ø«Ø¨Øª ØªØ±ØªÛŒØ¨ Ø§ÙˆÙ„ÛŒÙ‡ Ù‡Ø± Ù¾Ù†Ù„ */
function captureInitialOrder(){
  document.querySelectorAll('ul.books').forEach(ul=>{
    Array.from(ul.children).forEach((li,idx)=>{ li.dataset.order = String(idx) });
  });
}
captureInitialOrder();

sortList.querySelectorAll('li').forEach(li=>{
  li.addEventListener('click',async()=>{
    sortList.querySelectorAll('li').forEach(x=>x.classList.remove('active'));
    li.classList.add('active'); currentSort=li.dataset.sort;
    await applySort(); sortBtn.textContent='Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ: '+li.textContent.trim(); closeSort();
  })
});

function numFromSize(sizeStr){
  if(!sizeStr) return 9e9;
  const m=(sizeStr.match(/\d+/)||[0])[0];
  return parseInt(m,10)||9e9;
}

async function applySort(){
  const panels=[{ul:document.getElementById('list11'), key:'11'},{ul:document.getElementById('list10'), key:'10'}];

  panels.forEach(({ul})=>{
    const items=Array.from(ul.children).map(li=>{
      const id=li.dataset.id, meta=bookMeta[id]||{};
      const dl = parseInt(li.dataset.dl||'0',10);
      const fav= parseInt(li.dataset.fav||'0',10);
      const size=numFromSize(meta.size);
      const rate=(meta.rate==null? -1 : meta.rate);
      const order=parseInt(li.dataset.order||'0',10);
      return {li,id,dl,fav,size,rate,order};
    });

    switch(currentSort){
      case 'rate':       items.sort((a,b)=>b.rate-a.rate); break;
      case 'downloads':  items.sort((a,b)=>b.dl-a.dl);     break;
      case 'likes':      items.sort((a,b)=>b.fav-a.fav);   break;
      case 'size':       items.sort((a,b)=>a.size-b.size); break;
      default:           items.sort((a,b)=>a.order-b.order);break;
    }
    items.forEach(it=>ul.appendChild(it.li));
  });
}

/* ---- Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ ---- */
const pvModal=document.getElementById('previewModal');
const pvTitle=document.getElementById('pvTitle');
const pvBody=document.getElementById('pvBody');
const pvClose=document.getElementById('pvClose');
pvClose.addEventListener('click',()=>{pvModal.classList.remove('show');setTimeout(()=>pvModal.style.display='none',180)});
pvModal.addEventListener('click',e=>{if(e.target===pvModal) pvClose.click()});

function openPreview(card,id){
  const title = card.querySelector('.title').textContent.replace(/\(\d+ ?Ø¯Ø§Ù†Ù„ÙˆØ¯\)/,'').trim();
  const href  = card.dataset.href;
  const meta  = bookMeta[id]||{};
  const tags  = (meta.tags||[]).map(t=>`<span class="chip" style="pointer-events:none;opacity:.9">${t}</span>`).join(' ');
  pvTitle.textContent='Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Â«'+title+'Â»';
  pvBody.innerHTML =
    `<div>Ø­Ø¬Ù… ÙØ§ÛŒÙ„: <b>${meta.size || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</b></div>
     <div>Ù„ÛŒÙ†Ú© Ø¯Ø§Ù†Ù„ÙˆØ¯: ${href?`<a href="${href}" target="_blank" rel="noopener" style="color:#aef">Ø¨Ø§Ø² Ú©Ø±Ø¯Ù†</a>`:'Ù†Ø§Ù…Ø´Ø®Øµ'}</div>
     <div>Ø§Ù…ØªÛŒØ§Ø² Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§: <b>${meta.rate==null?'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯':faRate(meta.rate)}</b> ${meta.votes?`(Ø§Ø² ${faDigits(meta.votes)} Ø±Ø£ÛŒ)`:''}</div>
     <div style="margin-top:6px">Ø®Ø±ÛŒØ¯: ${meta.buy?`<a href="${meta.buy}" target="_blank" rel="noopener" style="color:#aef">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§</a>`:'â€”'}</div>
     <div style="margin-top:8px">Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§: ${tags || 'â€”'}</div>`;
  pvModal.style.display='flex'; setTimeout(()=>pvModal.classList.add('show'),10);
}

/* ---- Ù…ÙˆØ¯Ø§Ù„ Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§ ---- */
const cmtModal=document.getElementById('cmtModal');
const cmtTitle=document.getElementById('cmtTitle');
const cmtList=document.getElementById('cmtList');
const cmtInput=document.getElementById('cmtInput');
const cmtName=document.getElementById('cmtName');
const cmtSend=document.getElementById('cmtSend');
const cmtClose=document.getElementById('cmtClose');

let currentBookForCmt=null, currentCmtCounterEl=null;

function openCmtModal(bookId,title,counterEl){
  currentBookForCmt=bookId; currentCmtCounterEl=counterEl;
  cmtTitle.textContent='Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§ÛŒ '+title;
  cmtInput.value=''; cmtName.value='';
  cmtModal.style.display='flex'; setTimeout(()=>cmtModal.classList.add('show'),10);
  loadComments(bookId);
}
function closeCmtModal(){ cmtModal.classList.remove('show'); setTimeout(()=>cmtModal.style.display='none',150) }
cmtClose.addEventListener('click',closeCmtModal);
cmtModal.addEventListener('click',e=>{ if(e.target===cmtModal) closeCmtModal() });

async function loadComments(bookId){
  try{
    const r=await fetch(API_BASE + `/api/book-comments?slug=${encodeURIComponent(bookId)}`,{cache:'no-store'});
    const d=await r.json();
    if(!r.ok||!Array.isArray(d.list)) throw 0;
    renderComments(d.list);
    if(currentCmtCounterEl) currentCmtCounterEl.textContent=faDigits(d.list.length);
  }catch{
    renderComments([]); if(currentCmtCounterEl) currentCmtCounterEl.textContent='Û°';
  }
}
function renderComments(list){
  cmtList.innerHTML='';
  list.forEach(c=>{
    const li=document.createElement('li'); li.className='cmt-item';
    const head=document.createElement('div'); head.className='cmt-head';
    const uname=document.createElement('span');
    const nick = (c.nickname && c.nickname.trim()) ? c.nickname : 'Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ø´Ù†Ø§Ø³';
    uname.textContent = nick;
    head.appendChild(uname);
    const text=document.createElement('div'); text.className='cmt-text';
    text.textContent=(c.text||'');
    li.appendChild(head); li.appendChild(text);
    cmtList.appendChild(li);
  });
}
cmtSend.addEventListener('click',async()=>{
  const txt=(cmtInput.value||'').trim(); 
  const nick=(cmtName.value||'').trim();
  if(!txt) return;
  try{
    const r=await fetch(API_BASE + `/api/book-comments?slug=${encodeURIComponent(currentBookForCmt)}`,{
      method:'POST', headers:{'Content-Type':'application/json'},
      body:JSON.stringify({text:txt, nickname:nick})
    });
    const d=await r.json();
    if(r.ok && d && d.ok){ cmtInput.value=''; cmtName.value=''; await loadComments(currentBookForCmt); }
    else alert('Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯.');
  }catch{ alert('Ø§Ø±Ø³Ø§Ù„ Ù†Ø´Ø¯.'); }
});

/* ---- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ + Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ + Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ø§ Ù…ØªÙ† Ø«Ø§Ø¨Øª ---- */
function initCards(){
  const SITE_URL = (window.SITE_URL_OVERRIDE || 'https://learnbooks.pages.dev/');
  const RTL = '\u200F';

  const makeRatingText = (meta)=>{
    if (meta.rate==null) return 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯';
    const r = faRate(meta.rate);
    return `${r}${meta.votes?` (Ø§Ø² ${faDigits(meta.votes)} Ø±Ø£ÛŒ)`:''}`;
  };

  function makeShareText(title, dl, meta){
    const buy = meta.buy || 'â€”';
    const rating = makeRatingText(meta);
    return [
      `${RTL}ğŸ“˜ Ù†Ø§Ù… Ú©ØªØ§Ø¨:`,
      title,
      '',
      `${RTL}ğŸ“¥ Ù„ÛŒÙ†Ú© Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF:`,
      dl || 'â€”',
      '',
      `${RTL}ğŸ›’ Ù„ÛŒÙ†Ú© Ø®Ø±ÛŒØ¯ (Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§):`,
      buy,
      '',
      `${RTL}â­ Ø§Ù…ØªÛŒØ§Ø²:`,
      rating,
      '',
      `${RTL}ğŸŒ Ø¨Ø±Ø§ÛŒ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±:`,
      SITE_URL
    ].join('\n');
  }

  document.querySelectorAll('.book-card').forEach(card=>{
    const li=card.closest('li'); const id=li.dataset.id;
    const countEl=card.querySelector('[data-dlc]');
    const starTip=card.querySelector('.star-tip');
    const meta=bookMeta[id]||{};
    const rateEl=card.querySelector('[data-rate]');
    const sizeEl=card.querySelector('[data-size]');
    const cmtCountEl=card.querySelector('[data-cmtcount]');
    const favLbl=card.querySelector('[data-favcount]');
    const favBtn=card.querySelector('.icon-wrap.fav');
    const titleText=card.querySelector('.title').firstChild.textContent.trim();

    function faDigitsInSize(sizeStr) {
  let match = sizeStr.match(/^(\d+)/);
  if (!match) return sizeStr;
  let num = match[1];
  let rest = sizeStr.slice(num.length);
  return faDigits(Number(num)) + rest;
}

if(sizeEl) sizeEl.textContent = meta.size ? faDigitsInSize(meta.size) : 'â€”';
    if(rateEl) rateEl.textContent=faRate(meta.rate);

    // Ø¯Ø§Ù†Ù„ÙˆØ¯Ø´Ù…Ø§Ø± (Ù†Ù…Ø§ÛŒØ´ÛŒ + Ø¨Ø±Ø§ÛŒ Ø³ÙˆØ±Øª)
    getDownloads(id).then(v=>{
      li.dataset.dl = String(v||0);
      if(countEl) countEl.textContent=`(${faDigits(v||0)} Ø¯Ø§Ù†Ù„ÙˆØ¯)`;
    });

    // Tooltip Ø§Ù…ØªÛŒØ§Ø²
    card.querySelector('.icon-wrap.star')?.addEventListener('click',e=>{
      e.stopPropagation();
      let msg=(meta.rate==null)?'Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©ØªØ§Ø¨ Ø§Ù…ØªÛŒØ§Ø²ÛŒ Ø¯Ø± Ø¯ÛŒØ¬ÛŒâ€ŒÚ©Ø§Ù„Ø§ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª':`${faRate(meta.rate)} Ø§Ø² Ûµ ${meta.votes?`(Ø¨Ø± Ø§Ø³Ø§Ø³ ${faDigits(meta.votes)} Ø±Ø£ÛŒ)`:''}`;
      if(starTip) starTip.textContent=msg;
      starTip?.classList.remove('hide'); starTip?.classList.add('show');
      setTimeout(()=>{ starTip.classList.remove('show'); starTip.classList.add('hide') }, 6000);
    });

    // Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ: ÙÙ‚Ø· Ù…ØªÙ†Ø› url Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ù†Ù…ÛŒâ€ŒÙØ±Ø³ØªÛŒÙ… ØªØ§ ØªÙ‡ Ù¾ÛŒØ§Ù… Ù†Ú†Ø³Ø¨Ø¯
    card.querySelector('.icon-wrap.share')?.addEventListener('click', async e=>{
      e.stopPropagation();
      const dl = card.dataset.href || '';
      const text = makeShareText(titleText, dl, meta);
      if (navigator.share) {
        try { await navigator.share({ title: titleText, text }); } catch {}
      } else {
        try {
          await navigator.clipboard.writeText(text);
          alert('Ù…ØªÙ† Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú©Ù¾ÛŒ Ø´Ø¯ âœ…');
        } catch {
          alert('Ú©Ù¾ÛŒ Ù†Ø´Ø¯Ø› Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªÛŒ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯.');
        }
      }
    });

    // Ø®Ø±ÛŒØ¯
    card.querySelector('.icon-wrap.buy')?.addEventListener('click',e=>{
      e.stopPropagation(); if(meta.buy) window.open(meta.buy,'_blank','noopener');
    });

    // Ø¯Ø§Ù†Ù„ÙˆØ¯
    card.querySelector('.icon-wrap.dl')?.addEventListener('click',async e=>{
      e.stopPropagation();
      const nv=await addDownload(id);
      li.dataset.dl = String(nv||0);
      countEl.textContent=`(${faDigits(nv||0)} Ø¯Ø§Ù†Ù„ÙˆØ¯)`;
      const href=card.dataset.href; if(href) window.open(href,'_blank','noopener');
    });

    // Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§
    card.querySelector('.icon-wrap.comment')?.addEventListener('click',e=>{
      e.stopPropagation();
      openCmtModal(id, 'Â«'+titleText+'Â»', cmtCountEl);
    });

    fetch(API_BASE + `/api/book-comments?slug=${encodeURIComponent(id)}`,{cache:'no-store'})
      .then(r=>r.json()).then(d=>{
        if(cmtCountEl) cmtCountEl.textContent = faDigits(Array.isArray(d.list)? d.list.length : 0);
      }).catch(()=>{ cmtCountEl.textContent='Û°' });

    /* === Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ (Ø³ÛŒÙ†Ú© Ø¨Ø§ Ø³Ø±ÙˆØ± + localStorage) === */
    const FAVS_KEY='my_favs';
    const getMyFavs=()=>{ try{return JSON.parse(localStorage.getItem(FAVS_KEY))||[]}catch{return []} };
    const setMyFavs=v=>localStorage.setItem(FAVS_KEY, JSON.stringify(v));
    const isMyFav=id=>getMyFavs().includes(id);
    const addMyFav=id=>{ const s=new Set(getMyFavs()); s.add(id); setMyFavs([...s]) };
    const removeMyFav=id=>{ const s=new Set(getMyFavs()); s.delete(id); setMyFavs([...s]) };

    async function favGet(book){
      try{
        const r=await fetch(API_BASE + `/api/favorites?book=${encodeURIComponent(book)}&device=${encodeURIComponent(deviceId)}`,{cache:'no-store'});
        const d=await r.json(); return { count: d?.count ?? 0, isFav: !!d?.isFav };
      }catch{ return {count: (isMyFav(book)?1:0), isFav: isMyFav(book)} }
    }
    async function favToggle(book, toAdd){
      try{
        const r=await fetch(API_BASE + '/api/favorites', { method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ book, device: deviceId, op: toAdd?'add':'remove' }) });
        const d=await r.json();
        if(!r.ok) throw 0;
        return { count: d?.count ?? 0, isFav: !!d?.isFav };
      }catch{
        if (toAdd) addMyFav(book); else removeMyFav(book);
        return { count: 0, isFav: isMyFav(book) };
      }
    }

    // Ù„ÙˆØ¯ Ø§ÙˆÙ„ÛŒÙ‡ Ù„Ø§ÛŒÚ©
    favGet(id).then(({count,isFav})=>{
      if(favLbl) favLbl.textContent=faDigits(count||0);
      li.dataset.fav = String(count||0);        // Ø¨Ø±Ø§ÛŒ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ
      if(isFav) addMyFav(id); else removeMyFav(id);
      favBtn?.classList.toggle('active', isFav);
    }).catch(()=>{ li.dataset.fav='0'; });

    // Ú©Ù„ÛŒÚ© Ù‚Ù„Ø¨
    favBtn.addEventListener('click', async (e)=>{
      e.stopPropagation();
      const willAdd=!favBtn.classList.contains('active');
      try{
        const {count,isFav}=await favToggle(id, willAdd);
        if(favLbl) favLbl.textContent=faDigits(count||0);
        li.dataset.fav = String(count||0);      // Ø¢Ù¾Ø¯ÛŒØª Ø¨Ø±Ø§ÛŒ Ø³ÙˆØ±Øª
        if(isFav) addMyFav(id); else removeMyFav(id);
        favBtn?.classList.toggle('active', isFav);
      }catch{}
    });

    // Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ø§Ø±Øª -> Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´
    card.addEventListener('click',()=> openPreview(card,id));
  });
}
initCards();
</script>

<script>
/* === ÙÛŒÙ„ØªØ± Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§ (Ú†ÛŒÙ¾) â€” Ø¨Ø¯ÙˆÙ† Â«Ø³Ø§ÛŒØ±Â»ØŒ Ø­Ø°Ù ÙÛŒÙ„ØªØ± Ø¨Ø¯ÙˆÙ† Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„ === */
(function(){
  const tagsModal = document.getElementById('tagsModal');
  const tagsContainer = document.getElementById('tagsContainer');
  const btnTagsApply  = document.getElementById('btnTagsApply');
  const btnTagsDeleteAll  = document.getElementById('btnTagsDeleteAll');
  const btnTagsCancel = document.getElementById('btnTagsCancel');
  const btnTags = document.getElementById('btnTags');

  const BASE_GROUPS = {
    'Ù†ÙˆØ¹': ['ØªØ³Øª','ØªØ³Øª Ú©Ù†Ú©ÙˆØ±ÛŒ','Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡','Ø§Ù…ØªØ­Ø§Ù† Ù†Ù‡Ø§ÛŒÛŒ'],
    'Ù†Ø§Ø´Ø±': ['Ø®ÛŒÙ„ÛŒâ€ŒØ³Ø¨Ø²','Ú¯Ø§Ø¬','Ù…Ø¨ØªÚ©Ø±Ø§Ù†','Ù…Ù‡Ø± Ùˆ Ù…Ø§Ù‡','Ù…Ø´Ø§ÙˆØ±Ø§Ù†'],
    'Ù…Ø¯Ù„ Ú©ØªØ§Ø¨': ['Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù†','Ù…Ø§Ø¬Ø±Ø§ÛŒ Ø¨ÛŒØ³Øª','ÙØ±Ù…ÙˆÙ„ Ø¨ÛŒØ³Øª','Ù…Ø§Ø¬Ø±Ø§Ù‡Ø§ÛŒ Ù…Ù† Ùˆ Ø¯Ø±Ø³Ø§Ù…','Ø¬ÛŒ Ø¨ÛŒ Ù†Ú©ØªÙ‡ Ø¨Ø§Ø²','ÙØµÙ„ Ø¢Ø²Ù…ÙˆÙ†','ÙˆØ§Ù‚Ø¹Ø§ Ø¬Ø§Ù…Ø¹ Ú©Ù†Ú©ÙˆØ±','Ú©ØªØ§Ø¨Ú†Ù‡ Ø¬Ø§Ù…Ø¹ Ú©Ù†Ú©ÙˆØ±','Ø§Ù…ØªØ­Ø§Ù†Øª'],
    'Ù¾Ø§ÛŒÙ‡ ÛŒ Ù…Ø¯ Ù†Ø¸Ø±': ['Ù¾Ø§ÛŒÙ‡ Ø¯Ù‡Ù…','Ù¾Ø§ÛŒÙ‡ ÛŒØ§Ø²Ø¯Ù‡Ù…','Ù¾Ø§ÛŒÙ‡ Ø¯ÙˆØ§Ø²Ø¯Ù‡Ù…','Ø¬Ø§Ù…Ø¹ ( ÙˆÛŒÚ˜Ù‡ ÛŒ Ù‡Ø± Ø³Ù‡ Ù¾Ø§ÛŒÙ‡ )']
  };

  let selectedTags = new Set();
  let tempSelected = new Set();

  function normalizeTag(s){
    if (!s) return '';
    return String(s)
      .replace(/\u200c/g,' ')
      .replace(/[â€Œ\u00A0]/g,' ')
      .replace(/ÙŠ/g,'ÛŒ').replace(/Ùƒ/g,'Ú©')
      .replace(/\s+/g,' ')
      .trim();
  }

  function openModal(){ tempSelected=new Set(selectedTags); render(); tagsModal.style.display='flex'; setTimeout(()=>tagsModal.classList.add('show'),10); }
  function closeModal(){ tagsModal.classList.remove('show'); setTimeout(()=>tagsModal.style.display='none',160); }
  btnTags.addEventListener('click', openModal);
  tagsModal.addEventListener('click', e=>{ if(e.target===tagsModal) closeModal(); });

  function render(){
    const GROUPS = JSON.parse(JSON.stringify(BASE_GROUPS));
    const displayMap = {};
    Object.values(bookMeta||{}).forEach(m => (m.tags||[]).forEach(t=>{
      const n=normalizeTag(t); if(!displayMap[n]) displayMap[n]=t;
    }));
    const setType   = new Set(GROUPS['Ù†ÙˆØ¹'].map(normalizeTag));
    const setPub    = new Set(GROUPS['Ù†Ø§Ø´Ø±'].map(normalizeTag));
    const setModel  = new Set(GROUPS['Ù…Ø¯Ù„ Ú©ØªØ§Ø¨'].map(normalizeTag));
    const setGrade  = new Set(GROUPS['Ù¾Ø§ÛŒÙ‡ ÛŒ Ù…Ø¯ Ù†Ø¸Ø±'].map(normalizeTag));

    const existing = new Set();
    Object.values(bookMeta||{}).forEach(m => (m.tags||[]).forEach(t=> existing.add(normalizeTag(t))));

    // Ù‡Ø± ØªÚ¯ÛŒ Ú©Ù‡ Ø¯Ø± Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ Ù†ÛŒØ³ØªØŒ Ø¨Ù‡ "Ù†ÙˆØ¹" Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
    const toType = [...existing].filter(t=> !setPub.has(t) && !setModel.has(t) && !setGrade.has(t) && !setType.has(t));
    GROUPS['Ù†ÙˆØ¹'] = [...GROUPS['Ù†ÙˆØ¹'], ...toType.map(n=>displayMap[n])];

    let html='';
    Object.entries(GROUPS).forEach(([g,tags])=>{
      const seen=new Set();
      const chips = tags
        .filter(x=>{const n=normalizeTag(x); if(seen.has(n))return false; seen.add(n); return true;})
        .sort((a,b)=>normalizeTag(a).localeCompare(normalizeTag(b),'fa'))
        .map(t=> `<button type="button" class="chip" data-tag="${t}">${t}</button>`).join('');
      html += `<div class="tag-group"><div class="tag-group-title">${g}</div><div class="tag-group-body">${chips}</div></div>`;
    });
    tagsContainer.innerHTML=html;

    tempSelected.forEach(t=>{
      const sel=normalizeTag(t);
      tagsContainer.querySelectorAll('.chip').forEach(el=>{
        if (normalizeTag(el.dataset.tag)===sel) el.classList.add('active');
      });
    });
  }

  tagsContainer.addEventListener('click', e=>{
    const chip=e.target.closest('.chip'); if(!chip) return;
    const tag=chip.dataset.tag; const n=normalizeTag(tag);
    chip.classList.toggle('active');
    if(chip.classList.contains('active')) tempSelected.add(n);
    else tempSelected.delete(n);
  });

  function applyFilter(){
    const active=[...selectedTags];
    document.querySelectorAll('.books li').forEach(li=>{
      const id=li.dataset.id, meta=(bookMeta||{})[id]||{};
      const tags=(meta.tags||[]).map(normalizeTag);
      const ok = active.length===0 ? true : active.every(t=> tags.includes(t));
      li.style.display = ok ? '' : 'none';
    });
  }

  btnTagsApply.addEventListener('click', ()=>{ selectedTags=new Set(tempSelected); applyFilter(); closeModal(); });
  btnTagsDeleteAll.addEventListener('click', ()=>{
    selectedTags.clear();
    tempSelected.clear();
    tagsContainer.querySelectorAll('.chip.active').forEach(c=>c.classList.remove('active'));
    applyFilter(); // Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§Ø² Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯
  });
  btnTagsCancel.addEventListener('click', ()=>{ tempSelected=new Set(selectedTags); closeModal(); });
})();
</script>
  
<!-- === Dual Counter Widget (Compact) === -->
<!-- === Zekr Widget (Salawat + Laan) === -->
<div id="gc-widget" style="
  position:fixed; right:14px; bottom:14px; z-index:9999; direction:rtl; font-family:inherit;
  transition: transform .18s ease, opacity .18s ease;
">
  <div style="
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.2);
    box-shadow: 0 8px 20px rgba(0,0,0,.35);
    backdrop-filter: blur(6px);
    color:#fff; padding:8px 10px; border-radius:12px; min-width:210px;
  ">
    <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:4px">
      <div style="font-weight:800; font-size:13.5px; text-shadow:0 2px 5px rgba(0,0,0,.45)">
        Ø°Ú©Ø±Ù‡Ø§ÛŒ Ù‡Ù…Ú¯Ø§Ù†ÛŒ
      </div>
      <button id="gc-close" aria-label="Ø¨Ø³ØªÙ†" title="Ø¨Ø³ØªÙ†" style="
        width:24px; height:24px; border:none; border-radius:7px; cursor:pointer; color:#fff;
        background:rgba(255,255,255,.18); box-shadow:0 3px 10px rgba(0,0,0,.3);
        display:flex; align-items:center; justify-content:center; font-weight:900;
        line-height:1;
      ">Ã—</button>
    </div>

    <div style="display:grid; grid-template-columns: auto 1fr auto; align-items:center; gap:6px 8px">
      <!-- Salawat row -->
      <div style="opacity:.92; font-size:13px">ØµÙ„ÙˆØ§Øª:</div>
      <b id="gc-salawat" style="font-size:13px; text-align:left">â€”</b>
      <button id="gc-salawat-inc" style="
        border:none; cursor:pointer; color:#fff; font-size:12px;
        background: linear-gradient(135deg,#34d399,#10b981);
        box-shadow: 0 5px 14px rgba(0,0,0,.32);
        border-radius:8px; padding:6px 9px; font-family:inherit;
      ">+ Ø§Ø¶Ø§ÙÙ‡</button>

      <!-- Laan row -->
      <div style="opacity:.92; font-size:13px">Ù„Ø¹Ù†Ù Ø¹Ù…ÙØ±:</div>
      <b id="gc-laan" style="font-size:13px; text-align:left">â€”</b>
      <button id="gc-laan-inc" style="
        border:none; cursor:pointer; color:#fff; font-size:12px;
        background: linear-gradient(135deg,#f87171,#ef4444);
        box-shadow: 0 5px 14px rgba(0,0,0,.32);
        border-radius:8px; padding:6px 9px; font-family:inherit;
      ">+ Ø§Ø¶Ø§ÙÙ‡</button>
    </div>
  </div>
</div>

<div id="gc-toast" style="
  position:fixed; left:50%; transform:translateX(-50%) translateY(16px);
  bottom:10px; z-index:10000; pointer-events:none;
  opacity:0; transition: opacity .22s ease, transform .22s ease;
">
  <div id="gc-toast-text" style="
    background: rgba(0,0,0,.6); color:#fff; padding:8px 12px; border-radius:9px;
    border:1px solid rgba(255,255,255,.2); box-shadow:0 8px 18px rgba(0,0,0,.35);
    font-size:12.5px; backdrop-filter: blur(4px); white-space:nowrap;
  "></div>
</div>

<script>
(function(){
  // Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ
  const fa = v => (typeof v==='number' ? v.toLocaleString('fa-IR') : String(v).replace(/\d/g,d=>'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹'[d]));
  // Ø¹Ù†Ø§ØµØ±
  const w   = document.getElementById('gc-widget');
  const valS= document.getElementById('gc-salawat');
  const valL= document.getElementById('gc-laan');
  const btnS= document.getElementById('gc-salawat-inc');
  const btnL= document.getElementById('gc-laan-inc');
  const btnX= document.getElementById('gc-close');
  const toast = document.getElementById('gc-toast');
  const toastText = document.getElementById('gc-toast-text');

  // Ø§ÙÚ©Øª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
  [btnS, btnL].forEach(b=>{
    b.addEventListener('pointerdown', ()=> b.style.transform='scale(0.97)');
    b.addEventListener('pointerup',   ()=> b.style.transform='scale(1)');
    b.addEventListener('pointercancel',()=> b.style.transform='scale(1)');
    b.addEventListener('mouseleave',  ()=> b.style.transform='scale(1)');
  });

  function showToast(msg){
    toastText.textContent = msg;
    toast.style.opacity = '1';
    toast.style.transform = 'translateX(-50%) translateY(0)';
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=>{
      toast.style.opacity = '0';
      toast.style.transform = 'translateX(-50%) translateY(16px)';
    }, 3200);
  }

  function closeWidget(){
    w.style.opacity = '0';
    w.style.transform = 'translateY(8px) scale(0.985)';
    setTimeout(()=>{ w.style.display='none'; }, 160);
    showToast('Ø§Ø¨Ø²Ø§Ø± Ø°Ú©Ø± Ø¨Ø³ØªÙ‡ Ø´Ø¯Ø› Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ú¯Ø´ØªÙ†ØŒ ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ú©Ù†ÛŒØ¯.');
  }

  // ÙˆØ§Ú©Ø´ÛŒ Ù…Ù‚Ø¯Ø§Ø±Ù‡Ø§
  async function refresh(){
    try{
      const [rS, rL] = await Promise.all([
      fetch(API_BASE + '/api/global-counter?type=salawat',{cache:'no-store'}),
      fetch(API_BASE + '/api/global-counter?type=laan',{cache:'no-store'})
      ]);
      const dS = await rS.json();
      const dL = await rL.json();
      if(!rS.ok || !rL.ok || typeof dS.value!=='number' || typeof dL.value!=='number') throw 0;
      valS.textContent = fa(dS.value);
      valL.textContent = fa(dL.value);
    }catch{
      valS.textContent = 'Ø®Ø·Ø§';
      valL.textContent = 'Ø®Ø·Ø§';
    }
  }

  async function inc(which){
    const btn = which==='salawat' ? btnS : btnL;
    btn.disabled = true;
    try{
      const r = await fetch(API_BASE + `/api/global-counter?type=${which}`, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ inc: 1 }) });
      const d = await r.json();
      if(!r.ok || typeof d.value!=='number') throw 0;
      if(which==='salawat') valS.textContent = fa(d.value);
      else                   valL.textContent = fa(d.value);
    }catch{
      showToast('Ù†ØªÙˆÙ†Ø³ØªÙ… Ø§ÙØ²Ø§ÛŒØ´ Ø¨Ø¯Ù…Ø› Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†.');
    }finally{
      btn.disabled = false;
    }
  }

  btnS.addEventListener('click', ()=> inc('salawat'));
  btnL.addEventListener('click', ()=> inc('laan'));
  btnX.addEventListener('click', closeWidget);

  refresh();
})();
</script>
<!-- === /Zekr Widget === -->

  

<!-- toast -->
<div id="gc-toast" style="
  position:fixed; left:50%; transform:translateX(-50%) translateY(16px);
  bottom:10px; z-index:10000; pointer-events:none;
  opacity:0; transition: opacity .25s ease, transform .25s ease;
">
  <div style="
    background: rgba(0,0,0,.6); color:#fff; padding:7px 10px; border-radius:8px;
    border:1px solid rgba(255,255,255,.2); box-shadow:0 4px 12px rgba(0,0,0,.25);
    font-size:12.5px; backdrop-filter: blur(3px); white-space:nowrap;
  " id="gc-toast-text"></div>
</div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø­ØªÙˆØ§ÛŒ Ø¯Ø±ÙˆØ³ (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡) -->
<div class="modal" id="lessonsModal">
  <div class="box" style="width: min(850px, 95%);">
    <h3 style="text-align:center;border-bottom:1px solid rgba(255,255,255,0.2);padding-bottom:10px;">Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…Ø­ØªÙˆØ§ÛŒ Ø¯Ø±ÙˆØ³</h3>
    
    <div class="lessons-grid">
      <!-- Ø¯Ø±Ø³ 1 -->
      <div class="lesson-box">
        <h4>Ø¯Ø±Ø³ Û±</h4>
        <div class="lesson-btns">
          <a href="#" class="btn-link" onclick="showMindMap('Ù…Ø§ÛŒÙ†Ø¯ Ù…Ù¾', 'https://s34.picofile.com/file/8488752826/%D8%AA%D8%A7%D8%B1%DB%8C%D8%AE_11_%D8%AF%D8%B1%D8%B3_1.jpg')">ğŸ§  Ù…Ø§ÛŒÙ†Ø¯ Ù…Ù¾</a>
          <!-- Ù„ÛŒÙ†Ú© Ù¾Ø§Ø¯Ú©Ø³Øª Ø¨Ù‡ ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ Ù…ØªØµÙ„ Ø´Ø¯ -->
          
          <a href="https://learnbook.vercel.app/flash/flash-tarikh-11-1.html" target="_blank" class="btn-link">ğŸƒ ÙÙ„Ø´ Ú©Ø§Ø±Øª</a>
          
          
        </div>
      </div>
      
      <!-- Ø¯Ø±Ø³ 2 -->
      <div class="lesson-box">
        <h4>Ø¯Ø±Ø³ Û²</h4>
        <div class="lesson-btns">
          
          <!-- Ù„ÛŒÙ†Ú© Ù¾Ø§Ø¯Ú©Ø³Øª Ø¨Ù‡ ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ Ù…ØªØµÙ„ Ø´Ø¯ -->
          
          <a href="https://learnbook.vercel.app/flash/flash-tarikh-11-2.html" target="_blank" class="btn-link">ğŸƒ ÙÙ„Ø´ Ú©Ø§Ø±Øª</a>
          
          
        </div>
      </div>

      <!-- Ø¯Ø±Ø³ 3 -->
      <div class="lesson-box">
        <h4>Ø¯Ø±Ø³ Û³</h4>
        <div class="lesson-btns">
          
          <!-- Ù„ÛŒÙ†Ú© Ù¾Ø§Ø¯Ú©Ø³Øª Ø¨Ù‡ ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯ Ù…ØªØµÙ„ Ø´Ø¯ -->
          
          <a href="https://learnbook.vercel.app/flash/flash-tarikh-11-3.html" target="_blank" class="btn-link">ğŸƒ ÙÙ„Ø´ Ú©Ø§Ø±Øª</a>
          
          
        </div>
      </div>
    <div class="lesson-box"><h4>Ø¯Ø±Ø³ 4</h4><div class="lesson-btns"><a class="btn-link" href="#" onclick="showPodcast('Ù¾Ø§Ø¯Ú©Ø³Øª', 'https://archive.org/download/6_20251222_202512/%D9%BE%D8%A7%D8%AF%DA%A9%D8%B3%D8%AA_%D8%AF%D8%B1%D8%B3_4.m4a')">ğŸ™ï¸ Ù¾Ø§Ø¯Ú©Ø³Øª</a><a class="btn-link" href="https://learnbook.vercel.app/flash/flash-tarikh-11-4.html" target="_blank">ğŸƒ ÙÙ„Ø´ Ú©Ø§Ø±Øª</a><a class="btn-link" href="https://s34.picofile.com/d/8488752776/376ef671-1294-4ab4-a581-04bfa0ebd6d3/%D8%AF%D8%B1%D8%B3_4.pdf" target="_blank">ğŸ”— Ù¾ÛŒ Ø¯ÛŒ Ø§Ù Ù¾Ø§ÙˆØ± Ø¯Ø±Ø³</a></div></div><div class="lesson-box"><h4>Ø¯Ø±Ø³ 5</h4><div class="lesson-btns"><a class="btn-link" href="#" onclick="showPodcast('Ù¾Ø§Ø¯Ú©Ø³Øª', 'https://archive.org/download/6_20251222_202512/%D9%BE%D8%A7%D8%AF%DA%A9%D8%B3%D8%AA%20%D8%AF%D8%B1%D8%B3%205.m4a')">ğŸ™ï¸ Ù¾Ø§Ø¯Ú©Ø³Øª</a><a class="btn-link" href="https://learnbook.vercel.app/flash/flash-tarikh-11-5.html" target="_blank">ğŸƒ ÙÙ„Ø´ Ú©Ø§Ø±Øª</a><a class="btn-link" href="#" onclick="playVideo('cwd7ce0', 'ÙˆÛŒØ¯ÛŒÙˆ Ø®Ù„Ø§ØµÙ‡ Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù†')">ğŸŒ™ ÙˆÛŒØ¯ÛŒÙˆ Ø®Ù„Ø§ØµÙ‡ Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù†</a>
<a class="btn-link" href="https://s34.picofile.com/d/8488745876/600b7ba5-22f8-4785-b022-e0c494d9ae24/%D8%AF%D8%B1%D8%B3_5.pdf" target="_blank">ğŸ”— Ù¾ÛŒ Ø¯ÛŒ Ø§Ù Ù¾Ø§ÙˆØ± Ø¯Ø±Ø³</a></div></div><div class="lesson-box"><h4>Ø¯Ø±Ø³ 6</h4><div class="lesson-btns"><a class="btn-link" href="#" onclick="showPodcast('Ù¾Ø§Ø¯Ú©Ø³Øª', 'https://archive.org/download/6_20251222_202512/%D9%BE%D8%A7%D8%AF%DA%A9%D8%B3%D8%AA%20%D8%AF%D8%B1%D8%B3%206.m4a')">ğŸ™ï¸ Ù¾Ø§Ø¯Ú©Ø³Øª</a><a class="btn-link" href="https://learnbook.vercel.app/flash/flash-tarikh-11-6.html" target="_blank">ğŸƒ ÙÙ„Ø´ Ú©Ø§Ø±Øª</a><a class="btn-link" href="#" onclick="playVideo('odpph4y', 'ÙˆÛŒØ¯ÛŒÙˆ Ø®Ù„Ø§ØµÙ‡ Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù†')">ğŸŒ™ ÙˆÛŒØ¯ÛŒÙˆ Ø®Ù„Ø§ØµÙ‡ Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù†</a>
<a class="btn-link" href="https://s34.picofile.com/d/8488745850/1b5c534e-4e04-4c82-be08-e4749e28d4af/%D8%AF%D8%B1%D8%B3_6.pdf" target="_blank">ğŸ”— Ù¾ÛŒ Ø¯ÛŒ Ø§Ù Ù¾Ø§ÙˆØ± Ø¯Ø±Ø³</a></div></div><div class="lesson-box"><h4>Ø¯Ø±Ø³ 7</h4><div class="lesson-btns"><a class="btn-link" href="#" onclick="showPodcast('Ù¾Ø§Ø¯Ú©Ø³Øª', 'https://archive.org/download/padkast7/%D9%BE%D8%A7%D8%AF%DA%A9%D8%B3%D8%AA_%D8%AF%D8%B1%D8%B3_7.m4a')">ğŸ™ï¸ Ù¾Ø§Ø¯Ú©Ø³Øª</a><a class="btn-link" href="https://learnbook.vercel.app/flash/flash-tarikh-11-7.html" target="_blank">ğŸƒ ÙÙ„Ø´ Ú©Ø§Ø±Øª</a><a class="btn-link" href="#" onclick="playVideo('zkpd889', 'ÙˆÛŒØ¯ÛŒÙˆ Ø®Ù„Ø§ØµÙ‡ Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù†')">ğŸŒ™ ÙˆÛŒØ¯ÛŒÙˆ Ø®Ù„Ø§ØµÙ‡ Ø´Ø¨ Ø§Ù…ØªØ­Ø§Ù†</a>
<a class="btn-link" href="https://s34.picofile.com/d/8488745826/c2ea03e6-9392-4dd6-ae1e-6fbef8a852f9/%D8%AF%D8%B1%D8%B3_7.pdf" target="_blank">ğŸ”— Ù¾ÛŒ Ø¯ÛŒ Ø§Ù Ù¾Ø§ÙˆØ± Ø¯Ø±Ø³</a></div></div></div>

    <div class="row">
      <button id="lessonsClose" class="btn gray">Ø¨Ø³ØªÙ†</button>
    </div>
  </div>
</div>



<script>
// Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¨Ø§Ø² Ùˆ Ø¨Ø³ØªÙ‡ Ú©Ø±Ø¯Ù† Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø±ÙˆØ³
(function(){
  const lessonsModal = document.getElementById('lessonsModal');
  const lessonsClose = document.getElementById('lessonsClose');
  const viewBtns = document.querySelectorAll('.view-btn');

  // ØªØ§Ø¨Ø¹ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù†
  function openLessonsModal(){
    lessonsModal.style.display = 'flex';
    setTimeout(() => lessonsModal.classList.add('show'), 10);
  }

  // ØªØ§Ø¨Ø¹ Ø¨Ø³ØªÙ†
  function closeLessonsModal(){
    lessonsModal.classList.remove('show');
    setTimeout(() => lessonsModal.style.display = 'none', 160);
  }

  // Ø§ØªØµØ§Ù„ Ú©Ù„ÛŒÚ© Ø¨Ù‡ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú†Ø´Ù…
  viewBtns.forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation(); // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø§Ø² Ø´Ø¯Ù† Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ú©Ø§Ø±Øª
      e.preventDefault();
      openLessonsModal();
    });
  });

  // Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† Ùˆ Ú©Ù„ÛŒÚ© Ø¨ÛŒØ±ÙˆÙ† Ø¨Ø§Ú©Ø³
  if(lessonsClose) lessonsClose.addEventListener('click', closeLessonsModal);
  if(lessonsModal) lessonsModal.addEventListener('click', (e) => {
    if(e.target === lessonsModal) closeLessonsModal();
  });
})();
</script>
<script>
// Ù…ØªØºÛŒØ± Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø¯Ø±ÙˆØ³
let cameFromLessons = false;

// Ù…ØªÙ† Ú©Ø§Ù…Ù„ Ø¯Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§
const stories = {
  "1": "Ø±ÙÛŒÙ‚ Ø¨ÛŒØ§ ØªØ§ Ø¨Ø§ Ù‡Ù… Ø¯Ø§Ø³ØªØ§Ù† **Ø±ÙˆÙ…** Ø±Ø§ Ø¨Ø´Ù†ÙˆÛŒÙ…Ø› Ø´Ø¨Ù‡ Ø¬Ø²ÛŒØ±Ù‡â€ŒØ§ÛŒ Ø²ÛŒØ¨Ø§ Ø¨Ù‡ Ø´Ú©Ù„ Ú†Ú©Ù…Ù‡ØŒ Ù…ÛŒØ§Ù† **Ø¯Ø±ÛŒØ§ÛŒ Ù…Ø¯ÛŒØªØ±Ø§Ù†Ù‡** Ø¯Ø± Ø¹Ù‡Ø¯ Ø¨Ø§Ø³ØªØ§Ù†ØŒ Ø¬Ø§ÛŒÛŒ Ú©Ù‡ ØªÙ…Ø¯Ù†ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ Ø¨Ù‡ Ù†Ø§Ù… **Ø±ÙˆÙ…** Ø´Ú©Ù„ Ú¯Ø±ÙØª. Ø§ÛŒÙ† Ø³Ø±Ø²Ù…ÛŒÙ†ØŒ Ø¨Ø§ **Ø³ÙˆØ§Ø­Ù„ Ø·ÙˆÙ„Ø§Ù†ÛŒ** Ùˆ **Ø¯Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø­Ø§ØµÙ„Ø®ÛŒØ²**ØŒ Ø¬Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø´ØªÛŒâ€ŒØ±Ø§Ù†ÛŒ Ùˆ Ø²Ù†Ø¯Ú¯ÛŒ Ø¨ÙˆØ¯. Ú©ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ø¨Ù„Ù†Ø¯ **Ø¢Ù„Ù¾** Ø¯Ø± Ø´Ù…Ø§Ù„ Ù…Ø«Ù„ ÛŒÚ© Ø³Ø¯ Ø·Ø¨ÛŒØ¹ÛŒØŒ Ø±Ø§Ù‡ Ø±Ø§ Ø¨Ø³ØªÙ‡ Ø¨ÙˆØ¯Ù†Ø¯ØŒ Ø§Ù…Ø§ Ú¯Ø°Ø±Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±Ø§ÙˆØ§Ù†ÛŒ Ø¯Ø§Ø´Øª Ú©Ù‡ Ø§Ù‚ÙˆØ§Ù… Ù…Ø®ØªÙ„Ù Ø§Ø² Ø¢Ù† Ø¹Ø¨ÙˆØ± Ù…ÛŒâ€ŒÚ©Ø±Ø¯Ù†Ø¯.\n\nØ¯Ø§Ø³ØªØ§Ù† Ø§Ø² Ø­Ø¯ÙˆØ¯ **Û±ÛµÛ°Û° Ø³Ø§Ù„ Ù¾ÛŒØ´ Ø§Ø² Ù…ÛŒÙ„Ø§Ø¯** Ø´Ø±ÙˆØ¹ Ø´Ø¯ØŒ ÙˆÙ‚ØªÛŒ Ú¯Ø±ÙˆÙ‡ÛŒ Ø§Ø² Ø§Ù‚ÙˆØ§Ù… **Ù‡Ù†Ø¯ Ùˆ Ø§Ø±ÙˆÙ¾Ø§ÛŒÛŒ** Ø¨Ù‡ Ø§ÛŒÙ† Ø³Ø±Ø²Ù…ÛŒÙ† Ù¾Ø§ Ú¯Ø°Ø§Ø´ØªÙ†Ø¯ Ùˆ Ù…Ø²Ø±Ø¹Ù‡â€ŒÙ‡Ø§ Ùˆ Ø±ÙˆØ³ØªØ§Ù‡Ø§ÛŒÛŒ Ø³Ø§Ø®ØªÙ†Ø¯. Ø¨Ø¹Ø¯ØªØ±ØŒ Ø§Ù‚ÙˆØ§Ù…ÛŒ Ø§Ø² **ÛŒÙˆÙ†Ø§Ù†** Ø¢Ù…Ø¯Ù†Ø¯ Ùˆ ØªØ§Ø«ÛŒØ± Ø²ÛŒØ§Ø¯ÛŒ Ø±ÙˆÛŒ Ø´Ú©Ù„â€ŒÚ¯ÛŒØ±ÛŒ ØªÙ…Ø¯Ù† Ø±ÙˆÙ… Ú¯Ø°Ø§Ø´ØªÙ†Ø¯.\n\nØ´Ù‡Ø± **Ø±Ù…**ØŒ Ø¯Ø± Ù…Ø±Ú©Ø² Ø§ÛŒÙ† Ø´Ø¨Ù‡ Ø¬Ø²ÛŒØ±Ù‡ØŒ Ø§Ø² Ú©Ù†Ø§Ø± Ù‡Ù… Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ† Ú†Ù†Ø¯ Ø±ÙˆØ³ØªØ§ Ø¨Ø± Ú©Ø±Ø§Ù†Ù‡ Ø±ÙˆØ¯ **ØªÛŒØ¨Ø±** Ø¨Ù‡ ÙˆØ¬ÙˆØ¯ Ø¢Ù…Ø¯. Ø³Ø§Ù„ **ÛµÛ°Û¹ Ù¾ÛŒØ´ Ø§Ø² Ù…ÛŒÙ„Ø§Ø¯**ØŒ Ù…Ø±Ø¯Ù…Ø§Ù† Ø±Ù… Ø¨Ù‡ Ø´Ø§Ù‡ Ø®ÙˆØ¯ Ù†Ù‡ Ú¯ÙØªÙ†Ø¯ Ùˆ Ø­Ú©ÙˆÙ…Øª **Ø¬Ù…Ù‡ÙˆØ±ÛŒ** Ø±Ø§ ØªØ´Ú©ÛŒÙ„ Ø¯Ø§Ø¯Ù†Ø¯. Ø¯Ø± Ø§ÛŒÙ† Ø¯ÙˆØ±Ø§Ù†ØŒ Ø±Ù… Ø¨Ø§ Ø´Ú©Ø³Øª Ø¯Ø§Ø¯Ù† Ø¯Ø´Ù…Ù†Ø§Ù† Ø®ÙˆØ¯ØŒ Ø¨Ø± Ú©Ù„ Ø´Ø¨Ù‡ Ø¬Ø²ÛŒØ±Ù‡ Ø§ÛŒØªØ§Ù„ÛŒØ§ ØªØ³Ù„Ø· Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯. Ø­Ú©ÙˆÙ…ØªØ´Ø§Ù† ØªØ±Ú©ÛŒØ¨ÛŒ Ø§Ø² ÙØ±Ù‡Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ùˆ Ù†Ø¸Ø§Ù… Ø´Ù‡Ø±ÛŒ Ø¨ÙˆØ¯Ø› **Ù…Ø¬Ù„Ø³ Ø³Ù†Ø§** Ú©Ù‡ Ø§Ø´Ø±Ø§Ù Ø¯Ø± Ø¢Ù† Ø¨ÙˆØ¯Ù†Ø¯ Ùˆ **Ù…Ø¬Ù…Ø¹ Ù†Ù…Ø§ÛŒÙ†Ø¯Ú¯Ø§Ù† Ù…Ø±Ø¯Ù…**ØŒ Ø¨Ø§ Ù‡Ù… Ø§Ø¯Ø§Ø±Ù‡ Ú©Ø´ÙˆØ± Ø±Ø§ Ø¨Ù‡â€ŒØ¯Ø³Øª Ø¯Ø§Ø´ØªÙ†Ø¯.\n\nØ¯Ùˆ Ù†ÙØ± Ø¨Ù‡ Ù†Ø§Ù… **Ú©Ù†Ø³ÙˆÙ„** Ù‡Ø± Ø³Ø§Ù„ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒâ€ŒØ´Ø¯Ù†Ø¯ ØªØ§ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒÛŒ Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ù†Ø¯Ø› ÙˆÙ‚ØªÛŒ ÛŒÚ©ÛŒ Ø¨Ù‡ Ø¬Ù†Ú¯ Ù…ÛŒâ€ŒØ±ÙØªØŒ Ø¯ÛŒÚ¯Ø±ÛŒ Ø¯Ø± Ø´Ù‡Ø± Ù…Ø³Ø¦ÙˆÙ„ Ø§Ù…ÙˆØ± Ø¯Ø§Ø®Ù„ÛŒ Ø¨ÙˆØ¯. Ù‡Ø± Ú©Ø³ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§Ø³Øª Ù…Ù‚Ø§Ù… Ø¯ÙˆÙ„ØªÛŒ Ø¨Ú¯ÛŒØ±Ø¯ØŒ Ø¨Ø§ÛŒØ¯ Ø¯Ø± **Ø¯Ù‡ Ù†Ø¨Ø±Ø¯** Ø´Ø±Ú©Øª Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯Ø› ÛŒØ¹Ù†ÛŒ Ø¬Ù†Ú¯ Ù‡Ù… Ø§Ù…ØªØ­Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ø¬Ø§Ø¹Øª Ùˆ Ù„ÛŒØ§Ù‚Øª Ø¨ÙˆØ¯.\n\nØ§Ù…Ø§ Ø±ÙˆÙ… ÙÙ‚Ø· Ø¨Ù‡ Ø§ÛŒØªØ§Ù„ÛŒØ§ Ù‚Ø§Ù†Ø¹ Ù†Ø¨ÙˆØ¯ Ùˆ Ø¨Ù‡ Ø¯Ù†Ø¨Ø§Ù„ Ú¯Ø³ØªØ±Ø´ Ø¨ÙˆØ¯. Ø¨ÛŒÙ† Ø³Ø§Ù„â€ŒÙ‡Ø§ÛŒ **Û²Û¶Û´ ØªØ§ Û±Û´Û¶ Ù¾ÛŒØ´ Ø§Ø² Ù…ÛŒÙ„Ø§Ø¯**ØŒ Ø¬Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ÛŒ Ø¨Ø§ **Ú©Ø§Ø±ØªØ§Ú˜** (Ú©Ø´ÙˆØ±ÛŒ Ø¯Ø± Ø´Ù…Ø§Ù„ Ø¢ÙØ±ÛŒÙ‚Ø§) Ùˆ **Ù…Ù‚Ø¯ÙˆÙ†ÛŒâ€ŒÙ‡Ø§** (Ø¯Ø± ÛŒÙˆÙ†Ø§Ù† Ùˆ Ù…Ù‚Ø¯ÙˆÙ†ÛŒÙ‡) Ø¯Ø±Ú¯Ø±ÙØª. Ø¨Ø¹Ø¯ Ø§Ø² Ù¾ÛŒØ±ÙˆØ²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒØŒ Ø±ÙˆÙ… ØªÙˆØ§Ù†Ø³Øª Ø¨Ø± Ø¯Ø±ÛŒØ§ÛŒ Ù…Ø¯ÛŒØªØ±Ø§Ù†Ù‡ Ùˆ Ø§Ø·Ø±Ø§ÙØ´ Ø­Ú©ÙˆÙ…Øª Ú©Ù†Ø¯ Ùˆ Ø¨Ù‡ Ù‚Ø¯Ø±ØªÛŒ Ø¨Ø²Ø±Ú¯ ØªØ¨Ø¯ÛŒÙ„ Ø´ÙˆØ¯. Ø¢Ù†â€ŒÙ‡Ø§ Ø­ØªÛŒ Ø¨Ù‡ Ø´Ø±Ù‚ Ù…Ø¯ÛŒØªØ±Ø§Ù†Ù‡ Ùˆ Ø³Ø±Ø²Ù…ÛŒÙ†â€ŒÙ‡Ø§ÛŒ ØºØ±Ø¨ Ø¢Ø³ÛŒØ§ Ù„Ø´Ú©Ø± Ú©Ø´ÛŒØ¯Ù†Ø¯ØŒ ÙˆÙ„ÛŒ ØªÙ†Ù‡Ø§ **Ø§Ø´Ú©Ø§Ù†ÛŒØ§Ù†** Ø¨ÙˆØ¯Ù†Ø¯ Ú©Ù‡ Ø¬Ù„ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙˆÛŒ Ø¨ÛŒØ´ØªØ±Ø´Ø§Ù† Ø±Ø§ Ú¯Ø±ÙØªÙ†Ø¯.\n\nØ§Ù…Ø§ Ø§ÛŒÙ† ØªÙˆØ³Ø¹Ù‡â€ŒØ·Ù„Ø¨ÛŒ Ù¾ÛŒØ§Ù…Ø¯Ù‡Ø§ÛŒÛŒ Ø¯Ø§Ø´Øª: Ø¬Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ Ø¨Ø§Ø¹Ø« Ù‚ÙˆÛŒ Ø´Ø¯Ù† Ù†Ø¸Ø§Ù…ÛŒØ§Ù† Ùˆ Ø¯Ø± Ù†Ù‡Ø§ÛŒØª Ø¬Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø´Ø¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ù‚Ø§Ù†ÙˆÙ†â€ŒÙ‡Ø§ Ùˆ Ù†Ù‡Ø§Ø¯Ù‡Ø§ÛŒ Ø±ÙˆÙ… Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ø±Ù‡ Ø§ÛŒÙ† Ù‡Ù…Ù‡ Ø³Ø±Ø²Ù…ÛŒÙ† Ú©Ø§ÙÛŒ Ù†Ø¨ÙˆØ¯ Ùˆ Ù…Ø´Ú©Ù„Ø§Øª Ø²ÛŒØ§Ø¯ÛŒ Ø¨Ù‡ ÙˆØ¬ÙˆØ¯ Ø¢Ù…Ø¯.\n\nØ¯Ø± Ù†Ù‡Ø§ÛŒØªØŒ ÛŒÚ©ÛŒ Ø§Ø² Ø³Ø±Ø¯Ø§Ø±Ø§Ù† Ø¨Ù‡ Ù†Ø§Ù… **Ø§Ú©ØªØ§ÙˆÛŒØ§Ù†** ØªÙˆØ§Ù†Ø³Øª Ø¨Ø± Ø±Ù‚Ø¨Ø§ ØºÙ„Ø¨Ù‡ Ú©Ù†Ø¯ Ùˆ Ø¯Ø± Ø³Ø§Ù„ **Û²Û· Ù¾ÛŒØ´ Ø§Ø² Ù…ÛŒÙ„Ø§Ø¯** ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ø²Ø±Ú¯ÛŒ Ø¯Ø± Ø­Ú©ÙˆÙ…Øª Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯. Ù‚Ø¯Ø±Øª Ø§Ø¬Ø±Ø§ÛŒÛŒ Ø¨Ù‡ ÛŒÚ© Ù†ÙØ± Ø³Ù¾Ø±Ø¯Ù‡ Ø´Ø¯ Ú©Ù‡ **Ø¢Ú¯ÙˆØ³ØªÙˆØ³** ÛŒØ§ Ù‡Ù…Ø§Ù† **Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ±** Ù†Ø§Ù… Ú¯Ø±ÙØª. Ù…Ø¬Ù„Ø³ Ø³Ù†Ø§ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯ ÙˆÙ„ÛŒ Ù‚Ø¯Ø±Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¨Ù‡ Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ±Ù‡Ø§ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯ Ùˆ Ø¨Ø¹Ø¶ÛŒ Ù…Ø«Ù„ Ù¾Ø§Ø¯Ø´Ø§Ù‡Ø§Ù† Ù…Ø³ØªØ¨Ø¯ Ø­Ú©ÙˆÙ…Øª Ú©Ø±Ø¯Ù†Ø¯.\n\nØ§Ù…Ù¾Ø±Ø§ØªÙˆØ±ÛŒ Ø±ÙˆÙ… Ø¨Ù‡ Ø³Ù…Øª Ø´Ø±Ù‚ Ú¯Ø³ØªØ±Ø´ ÛŒØ§ÙØª Ùˆ Ø¨Ø§ **Ø§Ø´Ú©Ø§Ù†ÛŒØ§Ù†** Ùˆ **Ø³Ø§Ø³Ø§Ù†ÛŒØ§Ù†** Ø¬Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ÛŒ Ø¯Ø§Ø´Øª Ú©Ù‡ Ø¨Ø¹Ø¯Ù‡Ø§ Ø¯Ø±Ø¨Ø§Ø±Ù‡â€ŒØ´Ø§Ù† Ø¨ÛŒØ´ØªØ± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†ÛŒØ¯. Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ± **Ú©Ù†Ø³ØªØ§Ù†ØªÛŒÙ†** Ø¯Ø± Ø³Ø§Ù„ **Û³Û³Û° Ù…ÛŒÙ„Ø§Ø¯ÛŒ** Ø´Ù‡Ø± **Ø¨ÛŒØ²Ø§Ù†ØªÛŒÙˆÙ…** (Ù‚Ø³Ø·Ù†Ø·Ù†ÛŒÙ‡ ÛŒØ§ Ø§Ø³ØªØ§Ù†Ø¨ÙˆÙ„ Ø§Ù…Ø±ÙˆØ²) Ø±Ø§ Ù¾Ø§ÛŒØªØ®Øª Ú©Ø±Ø¯ Ùˆ Ø§ÛŒÙ† Ø¨Ø§Ø¹Ø« ØªÙ‚Ø³ÛŒÙ… Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ±ÛŒ Ø¨Ù‡ Ø¯Ùˆ Ø¨Ø®Ø´ Ø´Ø±Ù‚ÛŒ Ùˆ ØºØ±Ø¨ÛŒ Ø´Ø¯. Ø¨Ø®Ø´ ØºØ±Ø¨ÛŒ Ø¯Ø± Ø³Ø§Ù„ **Û´Û·Ûµ Ù…ÛŒÙ„Ø§Ø¯ÛŒ** Ø¨Ù‡ Ø¯Ø³Øª Ø§Ù‚ÙˆØ§Ù… Ø¨ÛŒØ§Ø¨Ø§Ù†â€ŒÚ¯Ø±Ø¯ Ù†Ø§Ø¨ÙˆØ¯ Ø´Ø¯ØŒ Ø§Ù…Ø§ Ø¨Ø®Ø´ Ø´Ø±Ù‚ÛŒ ØªØ§ Ø³Ø§Ù„ **Û±Û´ÛµÛ³** Ú©Ù‡ ØªÙˆØ³Ø· Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ±ÛŒ Ø¹Ø«Ù…Ø§Ù†ÛŒ ÙØªØ­ Ø´Ø¯ØŒ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯.\n\nØ²Ù†Ø¯Ú¯ÛŒ Ø¯Ø± Ø±ÙˆÙ… Ù¾Ø± Ø§Ø² ÙØ±Ù‡Ù†Ú¯ Ùˆ Ù‡Ù†Ø± Ø¨ÙˆØ¯. Ø±ÙˆÙ…ÛŒâ€ŒÙ‡Ø§ Ø§Ø² ÛŒÙˆÙ†Ø§Ù†ÛŒØ§Ù† Ú†ÛŒØ²Ù‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ÛŒ ÛŒØ§Ø¯ Ú¯Ø±ÙØªÙ†Ø¯Ø› Ø®Ø¯Ø§ÛŒØ§Ù† Ù…ØªØ¹Ø¯Ø¯ Ø¯Ø§Ø´ØªÙ†Ø¯ Ùˆ Ø¬Ø´Ù†â€ŒÙ‡Ø§ Ùˆ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙÛŒ Ø¨Ø±Ú¯Ø²Ø§Ø± Ù…ÛŒâ€ŒÚ©Ø±Ø¯Ù†Ø¯. Ø­ØªÛŒ Ø¨Ø¹Ø¶ÛŒ Ø¨Ø§ÙˆØ±Ù‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ Ù…Ø«Ù„ Ù¾Ø±Ø³ØªØ´ **Ù…Ù‡Ø± (Ù…ÛŒØªØ±Ø§)** Ø¯Ø± Ù…ÛŒØ§Ù†Ø´Ø§Ù† Ø±Ø§ÛŒØ¬ Ø´Ø¯ Ùˆ Ø¨Ø± ÙØ±Ù‡Ù†Ú¯Ø´Ø§Ù† ØªØ§Ø«ÛŒØ± Ú¯Ø°Ø§Ø´Øª.\n\nØ®Ø§Ù†ÙˆØ§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¯Ø± Ø±ÙˆÙ… Ø§Ø² Ú©ÙˆØ¯Ú©ÛŒ Ø¨Ù‡ ÙØ±Ø²Ù†Ø¯Ø§Ù†Ø´Ø§Ù† Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ø´Ù‡Ø±ÙˆÙ†Ø¯ÛŒØŒ Ú©Ø§Ø± Ø³Ø®ØªØŒ Ø´Ø¬Ø§Ø¹Øª Ùˆ ÙˆÙØ§Ø¯Ø§Ø±ÛŒ Ø¨Ù‡ Ø´Ù‡Ø± Ø±Ø§ Ø¢Ù…ÙˆØ²Ø´ Ù…ÛŒâ€ŒØ¯Ø§Ø¯Ù†Ø¯. Ø²Ù†Ø§Ù† Ø±ÙˆÙ…ÛŒ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø²Ù†Ø§Ù† ÛŒÙˆÙ†Ø§Ù†ÛŒ Ø¢Ø²Ø§Ø¯ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø´ØªÙ†Ø¯ Ùˆ Ù†Ù‚Ø´ ÙØ¹Ø§Ù„ØªØ±ÛŒ Ø¯Ø± Ø²Ù†Ø¯Ú¯ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ø¯Ø§Ø´ØªÙ†Ø¯.\n\n**Ø¨Ø±Ø¯Ù‡â€ŒØ¯Ø§Ø±ÛŒ** Ø¯Ø± Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ±ÛŒ Ø±ÙˆÙ… Ø¨Ø³ÛŒØ§Ø± Ø±Ø§ÛŒØ¬ Ø¨ÙˆØ¯ Ùˆ Ø§Ø®ØªÙ„Ø§Ù Ø«Ø±ÙˆØª Ø²ÛŒØ§Ø¯ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯.\"",
  "2": "Ø±ÙˆØ²ÛŒ Ø±ÙˆØ²Ú¯Ø§Ø±ÛŒØŒ Ø³Ø§Ø±Ø§ Ùˆ Ø§Ù…ÛŒØ±ØŒ Ø¯Ùˆ Ø¯ÙˆØ³Øª Ù…Ø§Ø¬Ø±Ø§Ø¬ÙˆØŒ ØªØµÙ…ÛŒÙ… Ú¯Ø±ÙØªÙ†Ø¯ Ø¨Ù‡ Ø³ÙØ± Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ ØªØ§Ø±ÛŒØ® Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡Ù†Ø¯. Ø§ÛŒÙ† Ø¨Ø§Ø± Ø¢Ù†â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ø³ØªÙ†Ø¯ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø²Ù…Ø§Ù† Ùˆ Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ú©Ø³Ø¨ Ú©Ù†Ù†Ø¯. Ø³Ø§Ø±Ø§ Ú¯ÙØª: \"Ø§Ù…ÛŒØ±ØŒ ØªØ§Ø±ÛŒØ® Ø¨Ø¯ÙˆÙ† Ø²Ù…Ø§Ù† Ù‡ÛŒÚ† Ù…Ø¹Ù†Ø§ÛŒÛŒ Ù†Ø¯Ø§Ø±Ø¯! Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú†Ú¯ÙˆÙ†Ù‡ Ø§Ù†Ø³Ø§Ù†â€ŒÙ‡Ø§ Ø²Ù…Ø§Ù† Ø±Ø§ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯.\" Ø§Ù…ÛŒØ± Ø¨Ø§ Ù‡ÛŒØ¬Ø§Ù† Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯: \"Ø¨Ù„Ù‡! Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ø¨Ø§Ø³ØªØ§Ù† Ø³ÙØ± Ú©Ù†ÛŒÙ… Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú†Ú¯ÙˆÙ†Ù‡ Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ Ø§Ø¨Ø¯Ø§Ø¹ Ø´Ø¯Ù‡ Ø§Ø³Øª.\" Ø¯ÙˆØ³ØªØ§Ù† Ù…Ø§ Ø¨Ù‡ Ø¯ÙˆØ±Ø§Ù†ÛŒ Ø³ÙØ± Ú©Ø±Ø¯Ù†Ø¯ Ú©Ù‡ Ø§Ù†Ø³Ø§Ù†â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø²Ù…Ø§Ù† ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ø±Ø¯Ù†Ø¯. Ø³Ø§Ø±Ø§ ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø¯: \"Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ ÛŒØ¹Ù†ÛŒ Ù†Ø¸Ø§Ù…ÛŒ Ú©Ù‡ Ø§Ù†Ø³Ø§Ù†â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø²Ù…Ø§Ù† Ø§Ø¨Ø¯Ø§Ø¹ Ú©Ø±Ø¯Ù†Ø¯. Ø§ÛŒÙ† Ú©Ø§Ø± Ø§Ø±ØªØ¨Ø§Ø· Ù†Ø²Ø¯ÛŒÚ©ÛŒ Ø¨Ø§ Ø±ÛŒØ§Ø¶ÛŒØ§Øª Ùˆ Ù†Ø¬ÙˆÙ… Ø¯Ø§Ø±Ø¯.\" Ø§Ù…ÛŒØ± Ø¨Ø§ Ø´Ú¯ÙØªÛŒ Ú¯ÙØª: \"Ùˆ Ø§Ù†Ø³Ø§Ù†â€ŒÙ‡Ø§ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ Ø³Ø§Ø¹Øªâ€ŒÙ‡Ø§ÛŒ Ø¢ÙØªØ§Ø¨ÛŒ Ùˆ Ø¢Ø¨ÛŒ Ùˆ Ø­ØªÛŒ Ø§ÙØ³Ø·Ø±Ù„Ø§Ø¨ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø±ØµØ¯ Ø®ÙˆØ±Ø´ÛŒØ¯ Ùˆ Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ Ø§Ø®ØªØ±Ø§Ø¹ Ú©Ø±Ø¯Ù†Ø¯!\" Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ Ø³ÙØ±ØŒ Ø¢Ù†â€ŒÙ‡Ø§ Ø¨Ø§ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ Ø¯Ø± Ø¬Ù‡Ø§Ù† Ø¢Ø´Ù†Ø§ Ø´Ø¯Ù†Ø¯. Ø³Ø§Ø±Ø§ Ú¯ÙØª: \"Ù…Ø±Ø¯Ù…Ø§Ù† Ø¨ÛŒÙ†â€ŒØ§Ù„Ù†Ù‡Ø±ÛŒÙ† Ùˆ Ù…ØµØ±ÛŒØ§Ù† Ø¨Ø§Ø³ØªØ§Ù† Ø¯Ø± ØªØ¯ÙˆÛŒÙ† Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ Ù¾ÛŒØ´Ú¯Ø§Ù… Ø¨ÙˆØ¯Ù†Ø¯. Ø¢Ù†â€ŒÙ‡Ø§ Ø³Ø§Ù„ Ø±Ø§ Ø¨Ù‡ Ù…Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù ØªÙ‚Ø³ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ø±Ø¯Ù†Ø¯.\" Ø§Ù…ÛŒØ± Ø§ÙØ²ÙˆØ¯: \"Ùˆ ÙˆÙ‚ØªÛŒ Ø±ÙˆÙ…ÛŒØ§Ù† Ø¨Ù‡ Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ Ù†ÛŒØ§Ø² Ø¯Ø§Ø´ØªÙ†Ø¯ØŒ Ø§Ù…Ù¾Ø±Ø§ØªÙˆØ± Ú˜ÙˆÙ„ÛŒÙˆØ³ Ø³Ø²Ø§Ø± Ø¢Ù† Ø±Ø§ Ø§ØµÙ„Ø§Ø­ Ú©Ø±Ø¯ Ùˆ Ù…Ø¨Ø¯Ø£ Ø¢Ù† ØªÙˆÙ„Ø¯ Ø­Ø¶Ø±Øª Ù…Ø³ÛŒØ­ Ø´Ø¯.\" Ø³Ù¾Ø³ØŒ Ø¢Ù†â€ŒÙ‡Ø§ Ø¨Ù‡ Ø¯ÙˆØ±Ø§Ù† Ø§ÛŒØ±Ø§Ù† Ø¨Ø§Ø³ØªØ§Ù† Ø³ÙØ± Ú©Ø±Ø¯Ù†Ø¯. Ø³Ø§Ø±Ø§ Ú¯ÙØª: \"Ø¯Ø± Ø¯ÙˆØ±Ø§Ù† Ù‡Ø®Ø§Ù…Ù†Ø´ÛŒØ§Ù†ØŒ Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ Ùˆ Ù‚Ù…Ø±ÛŒ Ø¨Ø§Ø¨Ù„ÛŒ Ø±ÙˆØ§Ø¬ Ø¯Ø§Ø´Øª Ùˆ Ø¯Ø± Ø²Ù…Ø§Ù† Ø³Ø§Ø³Ø§Ù†ÛŒØ§Ù†ØŒ Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ Ø§ÙˆØ³ØªØ§ÛŒÛŒ Ú©Ù‡ Ø¨Ù‡ Ø¯ÛŒÙ†ÛŒ Ø²Ø±ØªØ´ØªÛŒØ§Ù† Ù…Ø±Ø¨ÙˆØ· Ù…ÛŒâ€ŒØ´Ø¯ØŒ Ù…ØªØ¯Ø§ÙˆÙ„ Ø¨ÙˆØ¯.\" Ø§Ù…ÛŒØ± Ø¨Ø§ Ø¹Ù„Ø§Ù‚Ù‡ Ú¯ÙØª: \"Ùˆ Ø¯Ø± Ø¯ÙˆØ±Ø§Ù† Ø§Ø³Ù„Ø§Ù…ÛŒØŒ Ú¯Ø§Ù‡ Ø´Ù…Ø§Ø±ÛŒ Ù‡Ø¬Ø±ÛŒ Ù‚Ù…Ø±ÛŒ Ø±ÙˆØ§Ø¬ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯!\" Ø¨Ø¹Ø¯ Ø§Ø² Ø¢Ù†ØŒ Ø³Ø§Ø±Ø§ Ùˆ Ø§Ù…ÛŒØ± Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù†Ø¯ Ú©Ù‡ Ø²Ù…Ø§Ù† ØªÙ†Ù‡Ø§ ÛŒÚ©ÛŒ Ø§Ø² Ø¬Ù†Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ§Ø±ÛŒØ® Ø§Ø³Øª. Ø³Ø§Ø±Ø§ Ú¯ÙØª: \"Ù…Ú©Ø§Ù† Ù‡Ù… Ù†Ù‚Ø´ Ù…Ù‡Ù…ÛŒ Ø¯Ø± ØªØ§Ø±ÛŒØ® Ø¯Ø§Ø±Ø¯. ØªÙ…Ø§Ù… Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ Ø¯Ø± Ø¨Ø³ØªØ± Ù…Ú©Ø§Ù† Ùˆ Ù…Ø­ÛŒØ· Ø±Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯.\" Ø§Ù…ÛŒØ± Ø¨Ø§ ØªØ£Ú©ÛŒØ¯ Ú¯ÙØª: \"Ø¹ÙˆØ§Ù…Ù„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ Ø¢Ø¨ Ùˆ Ù‡ÙˆØ§ Ùˆ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø³Ø±Ø²Ù…ÛŒÙ†ÛŒ ØªØ£Ø«ÛŒØ± Ø²ÛŒØ§Ø¯ÛŒ Ø¨Ø± Ø²Ù†Ø¯Ú¯ÛŒ Ù…Ø±Ø¯Ù… Ø¯Ø§Ø±Ù†Ø¯.\" Ø¯ÙˆØ³ØªØ§Ù† Ù…Ø§ Ø¨Ù‡ Ø³ÙØ± Ø®ÙˆØ¯ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø¯Ù†Ø¯ Ùˆ Ø¨Ø§ Ù‡Ø±ÙˆØ¯ØªØŒ Ù…ÙˆØ±Ø® Ù…Ø´Ù‡ÙˆØ± ÛŒÙˆÙ†Ø§Ù†ÛŒ Ø¢Ø´Ù†Ø§ Ø´Ø¯Ù†Ø¯. Ø³Ø§Ø±Ø§ Ú¯ÙØª: \"Ù‡Ø±ÙˆØ¯Øª Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ´ØªÙ† ØªØ§Ø±ÛŒØ® Ø®ÙˆØ¯ Ø¨Ù‡ Ø¬Ø§Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø³ÙØ± Ú©Ø±Ø¯ Ùˆ Ø´Ø±Ø§ÛŒØ· Ø·Ø¨ÛŒØ¹ÛŒ Ùˆ Ø§Ù‚Ù„ÛŒÙ…ÛŒ Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø±Ø¯.\" Ø§Ù…ÛŒØ± Ø§ÙØ²ÙˆØ¯: \"Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ† Ù‡Ù… Ø¨Ù‡ ØªØ£Ø«ÛŒØ± Ø¬ØºØ±Ø§ÙÛŒØ§ Ø¨Ø± ØªØ§Ø±ÛŒØ® ØªÙˆØ¬Ù‡ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø¢Ù† Ù†ÙˆØ´ØªÙ‡ Ø§Ø³Øª.\"",
  "3": "Ø±ÙˆØ²ÛŒ Ø±ÙˆØ²Ú¯Ø§Ø±ÛŒØŒ Ø³Ø§Ø±Ø§ Ùˆ Ø§Ù…ÛŒØ±ØŒ Ø¯Ùˆ Ø¯ÙˆØ³Øª Ù…Ø§Ø¬Ø±Ø§Ø¬ÙˆØŒ ØªØµÙ…ÛŒÙ… Ú¯Ø±ÙØªÙ†Ø¯ Ú©Ù‡ Ø¨Ù‡ Ø³ÙØ± Ø®ÙˆØ¯ Ø¯Ø± Ø¯Ù†ÛŒØ§ÛŒ ØªØ§Ø±ÛŒØ® Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡Ù†Ø¯. Ø§ÛŒÙ† Ø¨Ø§Ø± Ø¢Ù†â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ø³ØªÙ†Ø¯ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø¨Ø§Ø³ØªØ§Ù† Ø´Ù†Ø§Ø³ÛŒ Ùˆ Ù†Ù‚Ø´ Ø¢Ù† Ø¯Ø± Ø´Ù†Ø§Ø®Øª ÙØ±Ù‡Ù†Ú¯ Ùˆ Ø²Ù†Ø¯Ú¯ÛŒ Ø§Ù†Ø³Ø§Ù†â€ŒÙ‡Ø§ Ø¯Ø± Ú¯Ø°Ø´ØªÙ‡ Ø¢Ø´Ù†Ø§ Ø´ÙˆÙ†Ø¯. Ø³Ø§Ø±Ø§ Ø¨Ø§ Ù‡ÛŒØ¬Ø§Ù† Ú¯ÙØª: \"Ø§Ù…ÛŒØ±ØŒ Ø¹Ù…ÙˆÛŒ Ù…Ù† Ø¨Ø§Ø³ØªØ§Ù† Ø´Ù†Ø§Ø³ Ø§Ø³Øª Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ø¯ ØªØ§ Ø¨ÛŒØ´ØªØ± Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø¨Ø§Ø³ØªØ§Ù† Ø´Ù†Ø§Ø³ÛŒ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±ÛŒÙ…!\" Ø§Ù…ÛŒØ± Ø¨Ø§ Ø¹Ù„Ø§Ù‚Ù‡ Ú¯ÙØª: \"Ø¹Ø§Ù„ÛŒÙ‡! Ø¨ÛŒØ§ÛŒÛŒØ¯ Ø¨Ù‡ Ø®Ø§Ù†Ù‡ Ø¹Ù…ÙˆÛŒ Ø³Ø§Ø±Ø§ Ø¨Ø±ÙˆÛŒÙ… Ùˆ Ø§Ø² Ø§Ùˆ Ø¨Ù¾Ø±Ø³ÛŒÙ… Ú©Ù‡ Ø¨Ø§Ø³ØªØ§Ù† Ø´Ù†Ø§Ø³ÛŒ Ú†ÛŒØ³Øª.\" ÙˆÙ‚ØªÛŒ Ø¨Ù‡ Ø®Ø§Ù†Ù‡ Ø¹Ù…ÙˆÛŒ Ø³Ø§Ø±Ø§ Ø±Ø³ÛŒØ¯Ù†Ø¯ØŒ Ø§Ùˆ Ø¨Ø§ Ù„Ø¨Ø®Ù†Ø¯ Ø¨Ù‡ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„Ø´Ø§Ù† Ø¢Ù…Ø¯. Ø¹Ù…ÙˆÛŒ Ø¢Ù†â€ŒÙ‡Ø§ Ú¯ÙØª: \"Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯! Ø¨Ø§Ø³ØªØ§Ù† Ø´Ù†Ø§Ø³ÛŒ Ø¹Ù„Ù…ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¢Ø«Ø§Ø± Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ùˆ ØªØ§Ø±ÛŒØ®ÛŒ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ ÙØ±Ù‡Ù†Ú¯ Ùˆ Ø´ÛŒÙˆÙ‡ Ø²Ù†Ø¯Ú¯ÛŒ Ø§Ù†Ø³Ø§Ù†â€ŒÙ‡Ø§ Ùˆ Ø¬ÙˆØ§Ù…Ø¹ Ú¯Ø°Ø´ØªÙ‡ Ø±Ø§ Ø¨Ø´Ù†Ø§Ø³Ø¯.\" Ø³Ø§Ø±Ø§ Ù¾Ø±Ø³ÛŒØ¯: \"Ø¢Ø«Ø§Ø± Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ú†Ù‡ Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ù‡Ø³ØªÙ†Ø¯ØŸ\" Ø¹Ù…ÙˆÛŒ Ø³Ø§Ø±Ø§ Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯: \"Ø¢Ø«Ø§Ø± Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ø´Ø§Ù…Ù„ Ø§Ø´ÛŒØ§ØŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ØŒ Ø¨Ù†Ø§Ù‡Ø§ Ùˆ Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒÛŒ Ø§Ø³Øª Ú©Ù‡ Ø³Ø§Ø®ØªÙ‡ Ø¯Ø³Øª Ø¨Ø´Ø± Ù‡Ø³ØªÙ†Ø¯. Ø§ÛŒÙ† Ø¢Ø«Ø§Ø± Ø¨Ù‡ Ù…Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø²Ù†Ø¯Ú¯ÛŒ Ù…Ø±Ø¯Ù… Ø¯Ø± Ú¯Ø°Ø´ØªÙ‡ Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯.\" Ø§Ù…ÛŒØ± Ø¨Ø§ Ø§Ø´ØªÛŒØ§Ù‚ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø¯: \"Ùˆ Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ú©Ø¬Ø§ Ù‡Ø³ØªÙ†Ø¯ØŸ\" Ø¹Ù…ÙˆÛŒ Ø³Ø§Ø±Ø§ ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø¯: \"Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø³Ú©ÙˆÙ†Øªâ€ŒÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ³ØªØ§ÛŒÛŒ ÛŒØ§ Ø´Ù‡Ø±ÛŒ Ø¨Ø§Ø´Ù†Ø¯ØŒ Ù…Ø§Ù†Ù†Ø¯ Ø´Ù‡Ø± Ø³ÙˆØ®ØªÙ‡ Ø¯Ø± Ø§ÛŒØ±Ø§Ù† ÛŒØ§ Ø´Ù‡Ø± Ù¾Ù…Ù¾Ø¦ÛŒ Ø¯Ø± Ø§ÛŒØªØ§Ù„ÛŒØ§. Ù‡Ù…Ú†Ù†ÛŒÙ† ØºØ§Ø±Ù‡Ø§ØŒ Ú¯ÙˆØ±Ø³ØªØ§Ù†â€ŒÙ‡Ø§ Ùˆ Ø¢Ø±Ø§Ù…Ú¯Ø§Ù‡â€ŒÙ‡Ø§ Ù†ÛŒØ² Ø§Ø² Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ù…Ù‡Ù… Ù‡Ø³ØªÙ†Ø¯.\" Ø¯ÙˆØ³ØªØ§Ù† Ù…Ø§ Ø¨Ø§ Ø´Ú¯ÙØªÛŒ Ø¨Ù‡ ØµØ­Ø¨Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÛŒ Ø³Ø§Ø±Ø§ Ú¯ÙˆØ´ Ù…ÛŒâ€ŒØ¯Ø§Ø¯Ù†Ø¯. Ø§Ùˆ Ú¯ÙØª: \"Ø¨Ø§Ø³ØªØ§Ù† Ø´Ù†Ø§Ø³Ø§Ù† Ø¨Ø±Ø§ÛŒ Ú©Ø´Ù Ø¢Ø«Ø§Ø± Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ù…Ø±Ø§Ø­Ù„ Ù…Ø®ØªÙ„ÙÛŒ Ø±Ø§ Ø·ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯. Ø§ÙˆÙ„ØŒ Ø¢Ù†â€ŒÙ‡Ø§ Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ùˆ Ú©Ø´Ù Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯. Ø³Ù¾Ø³ Ø­ÙØ§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ ØªØ§ Ø¢Ø«Ø§Ø± Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ø±Ø§ Ø§Ø² Ø¯Ù„ Ø®Ø§Ú© Ø¨ÛŒØ±ÙˆÙ† Ø¨ÛŒØ§ÙˆØ±Ù†Ø¯.\" Ø³Ø§Ø±Ø§ Ø¨Ø§ ØªØ¹Ø¬Ø¨ Ù¾Ø±Ø³ÛŒØ¯: \"Ú†Ø·ÙˆØ± Ø¨Ø§Ø³ØªØ§Ù† Ø´Ù†Ø§Ø³Ø§Ù† Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ØŸ\" Ø¹Ù…ÙˆÛŒ Ø³Ø§Ø±Ø§ ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø¯: \"Ø¢Ù†â€ŒÙ‡Ø§ Ø§Ø² Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ØŒ Ø³ÙØ±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ùˆ Ù‡Ù…Ú†Ù†ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù…Ø§Ù†Ù†Ø¯ Ù¾Ù‡Ù¾Ø§Ø¯Ù‡Ø§ Ùˆ ØªØµØ§ÙˆÛŒØ± Ù…Ø§Ù‡ÙˆØ§Ø±Ù‡â€ŒØ§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.\""
};

// ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯: ØªØºÛŒÛŒØ± Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù‚Ù„Ù… Ø¯Ø§Ø³ØªØ§Ù† Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ø­Ø§ÙØ¸Ù‡
window.changeStoryFontSize = function(delta) {
    const el = document.getElementById('storyContent');
    if (!el) return;
    
    // Ø¯Ø±ÛŒØ§ÙØª Ø³Ø§ÛŒØ² ÙØ¹Ù„ÛŒ
    let currentSize = parseFloat(window.getComputedStyle(el).fontSize);
    let newSize = currentSize + delta;
    
    // Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø³Ø§ÛŒØ² (Ø­Ø¯Ø§Ù‚Ù„ Û±Û° Ùˆ Ø­Ø¯Ø§Ú©Ø«Ø± ÛµÛ°)
    if (newSize < 10) newSize = 10;
    if (newSize > 50) newSize = 50;
    
    el.style.fontSize = newSize + 'px';
    // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ Ù…Ø±ÙˆØ±Ú¯Ø±
    localStorage.setItem('story_font_size', newSize);
};

// ØªÙˆØ§Ø¨Ø¹ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø±ÙˆØ³
function openLessonsModal(){
  const m = document.getElementById('lessonsModal');
  m.style.display = 'flex';
  setTimeout(() => m.classList.add('show'), 10);
}

function closeLessonsModal(){
  const m = document.getElementById('lessonsModal');
  m.classList.remove('show');
  setTimeout(() => m.style.display = 'none', 160);
}

// ØªØ§Ø¨Ø¹ Ù¾Ø®Ø´ ÙˆÛŒØ¯ÛŒÙˆ
// ØªØ§Ø¨Ø¹ Ù¾Ø®Ø´ ÙˆÛŒØ¯ÛŒÙˆ (Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù¾Ø°ÛŒØ±Ø´ Ú©Ø¯ Ú©Ø§Ù…Ù„ Ø§Ù…Ø¨Ø¯)
function playVideo(embedCode, title) {
  cameFromLessons = true;
  closeLessonsModal(); // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÛŒ Ø¯Ø±ÙˆØ³
  
  const pvModal = document.getElementById('previewModal');
  const pvTitle = document.getElementById('pvTitle');
  const pvBody = document.getElementById('pvBody');
  
  pvTitle.textContent = title;
  
  // ØªØºÛŒÛŒØ± Ù…Ù‡Ù…: Ø¨Ù‡ Ø¬Ø§ÛŒ Ø³Ø§Ø®ØªÙ† Ù„ÛŒÙ†Ú©ØŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ù‡Ù…Ø§Ù† Ú©Ø¯ÛŒ Ú©Ù‡ ÙØ±Ø³ØªØ§Ø¯ÛŒØ¯ Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
  pvBody.innerHTML = embedCode;
  
  pvModal.style.display = 'flex';
  setTimeout(() => pvModal.classList.add('show'), 10);
}


// ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø³ØªØ§Ù† - Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Ø¨ÙˆÙ„Ø¯ Ùˆ ØªØºÛŒÛŒØ± Ø³Ø§ÛŒØ²
function showStory(lessonNum) {
  cameFromLessons = true;
  closeLessonsModal(); // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÛŒ Ø¯Ø±ÙˆØ³
  
  const pvModal = document.getElementById('previewModal');
  const pvTitle = document.getElementById('pvTitle');
  const pvBody = document.getElementById('pvBody');
  
  pvTitle.textContent = 'Ø¯Ø§Ø³ØªØ§Ù† Ø¯Ø±Ø³ ' + lessonNum;
  
  // 1. Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ØªÙ†: ØªØ¨Ø¯ÛŒÙ„ **Ù…ØªÙ†** Ø¨Ù‡ <b>Ù…ØªÙ†</b> Ùˆ Ø­ÙØ¸ Ø®Ø·ÙˆØ·
  let rawText = stories[lessonNum];
  let formattedText = rawText.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
  
  // 2. Ø¯Ø±ÛŒØ§ÙØª Ø³Ø§ÛŒØ² ÙÙˆÙ†Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ (Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Û±Û¶)
  let savedSize = localStorage.getItem('story_font_size');
  if (!savedSize) savedSize = '16';
  
  // 3. Ø³Ø§Ø®Øª HTML: ØªÙˆÙ„Ø¨Ø§Ø± Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ + Ø¨Ø§Ú©Ø³ Ù…ØªÙ†
  // Ù†Ú©ØªÙ‡: white-space: pre-line Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø§ÛŒÙ†ØªØ±Ù‡Ø§ÛŒ ØªÙˆÛŒ Ù…ØªÙ† Ø§Ø¹Ù…Ø§Ù„ Ø´ÙˆÙ†Ø¯
  const toolbarHTML = `
    <div style="display:flex; justify-content:flex-end; gap:10px; margin-bottom:10px; align-items:center;">
        <span style="font-size:13px; color:#ddd;">Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù…ØªÙ†:</span>
        <button onclick="changeStoryFontSize(2)" style="cursor:pointer; padding:5px 10px; border-radius:6px; border:none; background:#4a5568; color:#fff;">+</button>
        <button onclick="changeStoryFontSize(-2)" style="cursor:pointer; padding:5px 10px; border-radius:6px; border:none; background:#4a5568; color:#fff;">-</button>
    </div>
  `;
  
  const contentHTML = `
    <div id="storyContent" style="
        background:white; 
        color:#333; 
        padding:20px; 
        border-radius:12px; 
        line-height:2; 
        text-align:justify; 
        max-height:400px; 
        overflow-y:auto; 
        direction:rtl; 
        font-size:${savedSize}px; 
        white-space: pre-line;
    ">
        ${formattedText}
    </div>
  `;
  
  pvBody.innerHTML = toolbarHTML + contentHTML;
  
  pvModal.style.display = 'flex';
  setTimeout(() => pvModal.classList.add('show'), 10);
}

// Ù…ØªØºÛŒØ± Ø³Ø±Ø§Ø³Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø¢Ø¨Ø¬Ú©Øª ØµÙˆØª
let currentAudio = null;

// ØªØ§Ø¨Ø¹ Ø¬Ø¯ÛŒØ¯: Ù†Ù…Ø§ÛŒØ´ Ù¾Ù„ÛŒØ± Ù¾Ø§Ø¯Ú©Ø³Øª
// ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù¾Ù„ÛŒØ± Ù¾Ø§Ø¯Ú©Ø³Øª Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø²Ù…Ø§Ù† Ùˆ ÙˆØ¶Ø¹ÛŒØª Ù„ÙˆØ¯ÛŒÙ†Ú¯
function showPodcast(title, audioUrl) {
    cameFromLessons = true;
    closeLessonsModal();
    
    if (currentAudio) { currentAudio.pause(); currentAudio = null; }

    const pvModal = document.getElementById('previewModal');
    const pvTitle = document.getElementById('pvTitle');
    const pvBody = document.getElementById('pvBody');

    pvTitle.textContent = title;
    pvBody.innerHTML = `
        <div class="audio-player-container">
            <div style="font-size:40px; margin-bottom:10px;">ğŸ™ï¸</div>
            <div id="podcastStatus" style="font-size:14px; color:#34d399; margin-bottom:15px;">Ø¯Ø± Ø­Ø§Ù„ Ù„ÙˆØ¯ Ø´Ø¯Ù† ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ...</div>
            
            <div class="audio-progress">
                <span id="currentTime">0:00</span>
                <input type="range" id="seekSlider" class="progress-bar" value="0" max="100">
                <span id="duration">0:00</span>
            </div>

            <div class="audio-controls">
                <button class="audio-btn" onclick="skipAudio(-10)">
                    <span>â†º</span><span class="skip-label">10s</span>
                </button>
                <button class="audio-btn main-play" id="playPauseBtn" onclick="togglePlayPodcast()">â¸</button>
 <!-- Ø¯Ú©Ù…Ù‡ ØªÙˆÙ‚Ù Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡: Ø¯Ø§ÛŒØ±Ù‡ Ø¨Ø§ Ù…Ø±Ø¨Ø¹ Ø¯Ø§Ø®Ù„ÛŒ -->
                <button class="audio-btn" onclick="stopAudio()" title="ØªÙˆÙ‚Ù">
                    <div style="width:14px; height:14px; background:white; border-radius:2px;"></div>
                </button>
                <button class="audio-btn" onclick="skipAudio(10)">
                    <span>â†»</span><span class="skip-label">10s</span>
                </button>
            </div>
            
            <div style="margin-top:20px; border-top:1px solid rgba(255,255,255,0.1); padding-top:15px;">
                <a href="${audioUrl}" download target="_blank" class="btn" style="text-decoration:none; display:inline-block; font-size:13px;">ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù¾Ø§Ø¯Ú©Ø³Øª</a>
            </div>
        </div>
    `;

    currentAudio = new Audio(audioUrl);
    const playBtn = document.getElementById('playPauseBtn');
    const slider = document.getElementById('seekSlider');
    const statusTxt = document.getElementById('podcastStatus');
    const storageKey = 'audio_pos_' + btoa(audioUrl).substring(0,16); // Ú©Ù„ÛŒØ¯ ÛŒÚ©ØªØ§ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù¾Ø§Ø¯Ú©Ø³Øª

    // Ù„ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø²Ù…Ø§Ù† Ù‚Ø¨Ù„ÛŒ
    const savedTime = localStorage.getItem(storageKey);
    if(savedTime) { currentAudio.currentTime = parseFloat(savedTime); }

    currentAudio.addEventListener('playing', () => { 
        statusTxt.textContent = "Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´..."; 
        playBtn.textContent = "â¸";
    });
    
    currentAudio.addEventListener('waiting', () => { 
        statusTxt.textContent = "Ø¯Ø± Ø­Ø§Ù„ Ù„ÙˆØ¯ Ø´Ø¯Ù† ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ..."; 
    });

    currentAudio.addEventListener('timeupdate', () => {
        slider.value = Math.floor(currentAudio.currentTime);
        document.getElementById('currentTime').textContent = formatTime(currentAudio.currentTime);
        // Ø³Ø¨Ø² Ú©Ø±Ø¯Ù† Ø®Ø· Ù‚Ø¨Ù„ Ø§Ø² Ø¯Ø§ÛŒØ±Ù‡
        const percent = (currentAudio.currentTime / currentAudio.duration) * 100;
        slider.style.background = `linear-gradient(to right, #34d399 ${percent}%, rgba(255,255,255,0.2) ${percent}%)`;
        // Ø°Ø®ÛŒØ±Ù‡ Ø²Ù…Ø§Ù† ÙØ¹Ù„ÛŒ
        localStorage.setItem(storageKey, currentAudio.currentTime);
    });

    currentAudio.addEventListener('loadedmetadata', () => {
        slider.max = Math.floor(currentAudio.duration);
        document.getElementById('duration').textContent = formatTime(currentAudio.duration);
    });

    slider.addEventListener('input', () => { currentAudio.currentTime = slider.value; });

    // Ù¾Ø®Ø´ Ø®ÙˆØ¯Ú©Ø§Ø±
    currentAudio.play().catch(e => {
        statusTxt.textContent = "Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯";
        playBtn.textContent = "â–¶";
    });

    pvModal.style.display = 'flex';
    setTimeout(() => pvModal.classList.add('show'), 10);
}

// ØªØ§Ø¨Ø¹ ØªÙˆÙ‚Ù Ù¾Ø®Ø´ (Ø¯Ø§ÛŒØ±Ù‡ Ùˆ Ù…Ø±Ø¨Ø¹)
window.stopAudio = function() {
    if (!currentAudio) return;
    currentAudio.pause();
    currentAudio.currentTime = 0;
    document.getElementById('playPauseBtn').textContent = "â–¶";
    document.getElementById('podcastStatus').textContent = "Ù…ØªÙˆÙ‚Ù Ø´Ø¯";
};

// ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…Ø§ÛŒÙ†Ø¯ Ù…Ù¾ (Ø¹Ú©Ø³) Ø¨Ø§ Ø²ÙˆÙ… Ùˆ ØªÙ…Ø§Ù… ØµÙØ­Ù‡
function showMindMap(title, imgUrl) {
    cameFromLessons = true;
    closeLessonsModal();
    const pvModal = document.getElementById('previewModal');
    const pvTitle = document.getElementById('pvTitle');
    const pvBody = document.getElementById('pvBody');

    pvTitle.textContent = title;
    pvBody.innerHTML = `
        <div style="text-align:center;">
            <div style="margin-bottom:15px; display:flex; justify-content:center; gap:10px;">
                <button class="btn" onclick="toggleFullScreenImg()" style="background:linear-gradient(135deg,#a78bfa,#7c3aed);">ğŸ–¥ï¸ ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ</button>
                <a href="${imgUrl}" download class="btn" style="background:linear-gradient(135deg,#60a5fa,#3b82f6); text-decoration:none;">ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¹Ú©Ø³</a>
            </div>
            <div id="imgContainer" style="overflow:hidden; border-radius:10px; background:#000; cursor:pointer;" onclick="toggleFullScreenImg()">
                <img src="${imgUrl}" id="mindMapImg" class="mindmap-img" style="display:block; width:100%;" alt="MindMap">
            </div>
            <p style="font-size:12px; margin-top:10px; opacity:0.7;">Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡ Ø±ÙˆÛŒ Ø¹Ú©Ø³ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.</p>
        </div>
    `;

    pvModal.style.display = 'flex';
    setTimeout(() => pvModal.classList.add('show'), 10);
}

window.toggleFullScreenImg = function() {
    const img = document.getElementById('mindMapImg');
    if (!document.fullscreenElement) {
        // Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡ Ú©Ø±Ø¯Ù† Ø§Ù„Ù…Ø§Ù† Ø¹Ú©Ø³
        if (img.requestFullscreen) {
            img.requestFullscreen();
        } else if (img.webkitRequestFullscreen) { /* Safari */
            img.webkitRequestFullscreen();
        } else if (img.msRequestFullscreen) { /* IE11 */
            img.msRequestFullscreen();
        }
    } else {
        // Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø§Ù„Øª ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡
        if (document.exitFullscreen) {
            document.exitFullscreen();
        }
    }
};

// Ø¯Ú©Ù…Ù‡ Ù¾Ù„ÛŒ/Ù¾ÙˆØ²
window.togglePlayPodcast = function() {
    const btn = document.getElementById('playPauseBtn');
    if (!currentAudio) return;
    
    if (currentAudio.paused) {
        currentAudio.play();
        btn.textContent = "â¸";
    } else {
        currentAudio.pause();
        btn.textContent = "â–¶";
    }
};

// Ù¾Ø±Ø´ Ø²Ù…Ø§Ù†ÛŒ
window.skipAudio = function(seconds) {
    if (!currentAudio) return;
    currentAudio.currentTime += seconds;
};

// ÙØ±Ù…Øª Ø²Ù…Ø§Ù† (Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚Ù‡:Ø«Ø§Ù†ÛŒÙ‡)
function formatTime(seconds) {
    if (isNaN(seconds)) return "0:00";
    const m = Math.floor(seconds / 60);
    const s = Math.floor(seconds % 60);
    return `${m}:${s < 10 ? '0' : ''}${s}`;
}

// Ø§ØµÙ„Ø§Ø­ Ø¯Ú©Ù…Ù‡ Ø¨Ø³ØªÙ† Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø¯Ø±ÙˆØ³
document.getElementById('pvClose').onclick = function() {
  const pvModal = document.getElementById('previewModal');
  
  // ØªÙˆÙ‚Ù Ù¾Ø®Ø´ ØµØ¯Ø§ Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø³ØªÙ†
  if (currentAudio) {
      currentAudio.pause();
      currentAudio = null;
  }

  pvModal.classList.remove('show');
  setTimeout(() => {
    pvModal.style.display = 'none';
    pvBody.innerHTML = ''; // Ø®Ø§Ù„ÛŒ Ú©Ø±Ø¯Ù† Ù…Ø­ØªÙˆØ§
    if(cameFromLessons) {
      openLessonsModal();
      cameFromLessons = false;
    }
  }, 180);
};

// Ø§ØªØµØ§Ù„ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ "Ù…Ø´Ø§Ù‡Ø¯Ù‡" Ø±ÙˆÛŒ Ú©Ø§Ø±Øª Ù¾Ú©ÛŒØ¬ Ø¢Ù…ÙˆØ²Ø´ÛŒ
document.querySelectorAll('.view-btn').forEach(btn => {
  btn.addEventListener('click', (e) => {
    e.stopPropagation();
    openLessonsModal();
  });
});

// Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø±ÙˆØ³ Ø¨Ø§ Ø¯Ú©Ù…Ù‡ Ø®ÙˆØ¯Ø´
document.getElementById('lessonsClose').onclick = closeLessonsModal;
</script>




<end_of_user_uploaded_file: fonoon_podcast_player.html="">
</end_of_user_uploaded_file:></start_of_user_uploaded_file:></body></html>
