<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>کتاب‌های کمک‌درسی تاریخ</title>
  <style>
    /* 🎨 فونت ایران‌یکان */
    @font-face {
      font-family: 'iranyekan';
      src: url('iranyekanweblight.woff') format('woff');
    }

    /* 🎨 تنظیمات کلی صفحه (فقط بک‌گراند به #222222 برگشت) */
    body{
      font-family:'iranyekan',sans-serif;
      background-color:#222222;   /* ← طبق درخواست شما */
      color:#fff;
      margin:0;
      padding:0;
      text-align:center;
    }

    /* 🟢 هدر (دست‌نخورده) */
    header{
      background-color:#1C93E3;
      color:#fff;
      padding:20px;
      font-size:22px;
      font-weight:bold;
    }

    /* 📚 لیست کتاب‌ها */
    .book-list{max-width:500px;margin:30px auto;padding:0;list-style:none}

    /* 🔵 آیتم‌ها (دست‌نخورده) */
    .book-item{
      background-color:#28A745;
      padding:15px;margin:10px 0;border-radius:8px;
      box-shadow:0 2px 5px rgba(0,0,0,.3);
      transition:transform .2s ease, box-shadow .2s ease;
    }
    .book-item:hover{transform:translateY(-3px);box-shadow:0 4px 12px rgba(0,0,0,.5)}
    .book-item a{text-decoration:none;color:#fff;font-weight:bold}

    /* 📱 ریسپانسیو */
    @media (max-width:500px){
      header{font-size:18px}
      .book-item{font-size:14px}
    }

    /* 📊 شمارنده */
    #counter{margin:30px 0;font-size:16px;color:#ccc}
  </style>
</head>
<body>

  <header>📚 کتاب‌های کمک‌درسی تاریخ</header>

  <ul class="book-list">
    <li class="book-item">
      <a href="https://mega.nz/file/tmgwVKRA#LkrI54ta-_8RQcato_aABuFHHhThghOvjQzWXjfPQ4k" target="_blank">
        ماجرای بیست – خیلی سبز
      </a>
    </li>
    <li class="book-item">
      <a href="https://mega.nz/file/ViBikQ7C#a6qWI8LcF28a8FVpS8z1CZEt4yeVZAn2V1bkOzdCCFQ" target="_blank">
        ماجراهای من و درسام – خیلی سبز
      </a>
    </li>
    <li class="book-item">
      <a href="https://s34.picofile.com/file/8486137768/tarikh11_shab.pdf.html" target="_blank">
        شب امتحان – خیلی سبز
      </a>
    </li>
  </ul>

  <!-- 📊 شمارنده بازدید -->
  <div id="counter">
    <span id="visit-count">در حال بارگذاری...</span>
  </div>

  <script>
    // نام‌فضا ثابت؛ کلید از مسیر صفحه ساخته می‌شود (برای صفحات بعدی، مستقل می‌شود)
    const NAMESPACE = 'book11-one';
    const KEY = (location.pathname.replace(/[^\w]+/g,'_') || 'index');

    async function hitCount(){
      const urls = [
        `https://api.countapi.xyz/hit/${NAMESPACE}/${KEY}`,
        `https://countapi.xyz/hit/${NAMESPACE}/${KEY}`
      ];
      for (const url of urls){
        try{
          const res = await fetch(url, {cache:'no-store'});
          if(!res.ok) continue;
          const data = await res.json();
          if (typeof data.value === 'number') return data.value;
        }catch(e){ /* امتحان بعدی */ }
      }
      throw new Error('all endpoints failed');
    }

    (async ()=>{
      const el = document.getElementById('visit-count');
      try{
        const value = await hitCount();
        el.textContent = `بازدید این صفحه: ${value}`;
      }catch(e){
        el.textContent = 'خطا در دریافت آمار بازدید 😕';
      }
    })();
  </script>

</body>
</html>
