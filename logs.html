<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <title>Ù„Ø§Ú¯ Ø¨Ø§Ø²Ø¯ÛŒØ¯Ù‡Ø§</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f7f7f7; padding:20px; }
    h1 { color:#333; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; background:white; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background:#eee; }
    tr:nth-child(even){ background:#f9f9f9; }
  </style>
</head>
<body>
  <h1>ğŸ“‹ Ù„ÛŒØ³Øª Ø¨Ø§Ø²Ø¯ÛŒØ¯Ù‡Ø§</h1>
  <table>
    <thead>
      <tr>
        <th>â° Ø²Ù…Ø§Ù†</th>
        <th>ğŸ“± Ø¯Ø³ØªÚ¯Ø§Ù‡ / Ø³ÛŒØ³ØªÙ… Ø¹Ø§Ù…Ù„</th>
        <th>ğŸŒ Ù…Ø±ÙˆØ±Ú¯Ø±</th>
        <th>ğŸ” User-Agent Ú©Ø§Ù…Ù„</th>
      </tr>
    </thead>
    <tbody id="logs-body"></tbody>
  </table>

<script>
  async function loadLogs() {
    try {
      const res = await fetch("/api/logs"); 
      const data = await res.json();

      const tbody = document.getElementById("logs-body");
      tbody.innerHTML = "";

      if (!data.logs || data.logs.length === 0) {
        tbody.innerHTML = "<tr><td colspan='4'>Ù‡ÛŒÚ† Ù„Ø§Ú¯ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯</td></tr>";
        return;
      }

      data.logs.forEach(log => {
        const [os, browser] = log.parsed ? log.parsed.split(" - ") : ["Ù†Ø§Ù…Ø´Ø®Øµ", "Ù†Ø§Ù…Ø´Ø®Øµ"];
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${new Date(log.time).toLocaleString("fa-IR")}</td>
          <td>${os}</td>
          <td>${browser}</td>
          <td>${log.ua}</td>
        `;
        tbody.appendChild(tr);
      });
    } catch (e) {
      console.error("Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ù„Ø§Ú¯:", e);
    }
  }

  loadLogs();
</script>

</html>

